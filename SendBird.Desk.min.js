/**
 * Copyright(c) 2016 SendBird, Inc.
 * SendBird Desk JavaScript SDK v1.0.21
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SendBirdDesk=e()}(this,function(){"use strict";function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){e&&U(t.prototype,e),n&&U(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function G(t,e,n){return(G=B()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);e=new(Function.bind.apply(t,r));return n&&M(e,n.prototype),e}).apply(null,arguments)}function K(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return G(t,arguments,L(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),M(e,t)}(t)}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(n){var r=B();return function(){var t,e=L(n),e=(t=r?(t=L(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}}function V(n,r){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(r,t)}}var q=Object.prototype.toString;function J(t){return"[object Array]"===q.call(t)}function W(t){return void 0===t}function Q(t){return null!==t&&"object"==typeof t}function X(t){return"[object Function]"===q.call(t)}function Y(t,e){if(null!=t)if(J(t="object"!=typeof t?[t]:t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var u={isArray:J,isArrayBuffer:function(t){return"[object ArrayBuffer]"===q.call(t)},isBuffer:function(t){return null!==t&&!W(t)&&null!==t.constructor&&!W(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Q,isUndefined:W,isDate:function(t){return"[object Date]"===q.call(t)},isFile:function(t){return"[object File]"===q.call(t)},isBlob:function(t){return"[object Blob]"===q.call(t)},isFunction:X,isStream:function(t){return Q(t)&&X(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Y,merge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]=t}for(var e=0,o=arguments.length;e<o;e++)Y(arguments[e],t);return r},deepMerge:function n(){var r={};function t(t,e){"object"==typeof r[e]&&"object"==typeof t?r[e]=n(r[e],t):r[e]="object"==typeof t?n({},t):t}for(var e=0,o=arguments.length;e<o;e++)Y(arguments[e],t);return r},extend:function(n,t,r){return Y(t,function(t,e){n[e]=r&&"function"==typeof t?V(t,r):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function $(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Z=function(t,e,n){if(!e)return t;var r,n=n?n(e):u.isURLSearchParams(e)?e.toString():(r=[],u.forEach(e,function(t,e){null!=t&&(u.isArray(t)?e+="[]":t=[t],u.forEach(t,function(t){u.isDate(t)?t=t.toISOString():u.isObject(t)&&(t=JSON.stringify(t)),r.push($(e)+"="+$(t))}))}),r.join("&"));return n&&(-1!==(e=t.indexOf("#"))&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+n),t};function tt(){this.handlers=[]}tt.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},tt.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},tt.prototype.forEach=function(e){u.forEach(this.handlers,function(t){null!==t&&e(t)})};function et(e,n,t){return u.forEach(t,function(t){e=t(e,n)}),e}function nt(t){return!(!t||!t.__CANCEL__)}function rt(n,r){u.forEach(n,function(t,e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=t,delete n[e])})}var ot,it,e,at=tt,ct=function(t,e,n,r,o){var t=new Error(t);return n=n,r=r,o=o,(t=t).config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},ut=function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(ct("Request failed with status code "+n.status,n.config,null,n.request,n))},st=function(t,e){return t&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)?(t=t,(n=e)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t):e;var n},lt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ft=function(t){var e,n,r={};return t&&u.forEach(t.split("\n"),function(t){n=t.indexOf(":"),e=u.trim(t.substr(0,n)).toLowerCase(),n=u.trim(t.substr(n+1)),!e||r[e]&&0<=lt.indexOf(e)||(r[e]="set-cookie"===e?(r[e]||[]).concat([n]):r[e]?r[e]+", "+n:n)}),r},pt=u.isStandardBrowserEnv()?(it=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),ot=dt(window.location.href),function(t){t=u.isString(t)?dt(t):t;return t.protocol===ot.protocol&&t.host===ot.host}):function(){return!0};function dt(t){return it&&(e.setAttribute("href",t),t=e.href),e.setAttribute("href",t),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}function ht(c){return new Promise(function(e,n){var t,r=c.data,o=c.headers,i=(u.isFormData(r)&&delete o["Content-Type"],new XMLHttpRequest),a=(c.auth&&(a=c.auth.username||"",t=c.auth.password||"",o.Authorization="Basic "+btoa(a+":"+t)),st(c.baseURL,c.url));if(i.open(c.method.toUpperCase(),Z(a,c.params,c.paramsSerializer),!0),i.timeout=c.timeout,i.onreadystatechange=function(){var t;i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&(t="getAllResponseHeaders"in i?ft(i.getAllResponseHeaders()):null,t={data:c.responseType&&"text"!==c.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:t,config:c,request:i},ut(e,n,t),i=null)},i.onabort=function(){i&&(n(ct("Request aborted",c,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(ct("Network Error",c,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+c.timeout+"ms exceeded";c.timeoutErrorMessage&&(t=c.timeoutErrorMessage),n(ct(t,c,"ECONNABORTED",i)),i=null},u.isStandardBrowserEnv()&&(t=yt,(a=(c.withCredentials||pt(a))&&c.xsrfCookieName?t.read(c.xsrfCookieName):void 0)&&(o[c.xsrfHeaderName]=a)),"setRequestHeader"in i&&u.forEach(o,function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)}),u.isUndefined(c.withCredentials)||(i.withCredentials=!!c.withCredentials),c.responseType)try{i.responseType=c.responseType}catch(t){if("json"!==c.responseType)throw t}"function"==typeof c.onDownloadProgress&&i.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(t){i&&(i.abort(),n(t),i=null)}),void 0===r&&(r=null),i.send(r)})}var yt=u.isStandardBrowserEnv()?{write:function(t,e,n,r,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),u.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),u.isString(r)&&a.push("path="+r),u.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){t=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},gt={"Content-Type":"application/x-www-form-urlencoded"};function mt(t,e){!u.isUndefined(t)&&u.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var vt={adapter:t="undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?ht:t,transformRequest:[function(t,e){return rt(e,"Accept"),rt(e,"Content-Type"),u.isFormData(t)||u.isArrayBuffer(t)||u.isBuffer(t)||u.isStream(t)||u.isFile(t)||u.isBlob(t)?t:u.isArrayBufferView(t)?t.buffer:u.isURLSearchParams(t)?(mt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):u.isObject(t)?(mt(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}},bt=(u.forEach(["delete","get","head"],function(t){vt.headers[t]={}}),u.forEach(["post","put","patch"],function(t){vt.headers[t]=u.merge(gt)}),vt);function Et(t){t.cancelToken&&t.cancelToken.throwIfRequested()}function St(e){return Et(e),e.headers=e.headers||{},e.data=et(e.data,e.headers,e.transformRequest),e.headers=u.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),u.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||bt.adapter)(e).then(function(t){return Et(e),t.data=et(t.data,t.headers,e.transformResponse),t},function(t){return nt(t)||(Et(e),t&&t.response&&(t.response.data=et(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}function Rt(e,n){n=n||{};var r={},t=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],a=(u.forEach(t,function(t){void 0!==n[t]&&(r[t]=n[t])}),u.forEach(o,function(t){u.isObject(n[t])?r[t]=u.deepMerge(e[t],n[t]):void 0!==n[t]?r[t]=n[t]:u.isObject(e[t])?r[t]=u.deepMerge(e[t]):void 0!==e[t]&&(r[t]=e[t])}),u.forEach(i,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])}),t.concat(o).concat(i)),t=Object.keys(n).filter(function(t){return-1===a.indexOf(t)});return u.forEach(t,function(t){void 0!==n[t]?r[t]=n[t]:void 0!==e[t]&&(r[t]=e[t])}),r}function kt(t){this.defaults=t,this.interceptors={request:new at,response:new at}}kt.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Rt(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[St,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},kt.prototype.getUri=function(t){return t=Rt(this.defaults,t),Z(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},u.forEach(["delete","get","head","options"],function(n){kt.prototype[n]=function(t,e){return this.request(u.merge(e||{},{method:n,url:t}))}}),u.forEach(["post","put","patch"],function(r){kt.prototype[r]=function(t,e,n){return this.request(u.merge(n||{},{method:r,url:t,data:e}))}});var Ot=kt;function It(t){this.message=t}It.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},It.prototype.__CANCEL__=!0;var wt=It;function Tt(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");this.promise=new Promise(function(t){e=t});var e,n=this;t(function(t){n.reason||(n.reason=new wt(t),e(n.reason))})}Tt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Tt.source=function(){var e;return{token:new Tt(function(t){e=t}),cancel:e}};var t=Tt;function At(t){var t=new Ot(t),e=V(Ot.prototype.request,t);return u.extend(e,Ot.prototype,t),u.extend(e,t),e}var r=At(bt),t=(r.Axios=Ot,r.create=function(t){return At(Rt(r.defaults,t))},r.Cancel=wt,r.CancelToken=t,r.isCancel=nt,r.all=function(t){return Promise.all(t)},r.spread=function(e){return function(t){return e.apply(null,t)}},r),h=(t.default=r,t),t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Dt(t,e){return t(e={exports:{}},e.exports),e.exports}function Nt(t){return t&&t.Math==Math&&t}function o(t){try{return!!t()}catch(t){return!0}}function _t(t){return le(pe(t))}function Ct(t){return ge(pe(t))}function Pt(t){return"Symbol("+(void 0===t?"":t)+")_"+Ee(++ve+be,36)}function xt(t,e){return arguments.length<2?(n=f[t],m(n)?n:void 0):f[t]&&f[t][e];var n}function a(t){var e;return d(Oe,t)&&(Re||"string"==typeof Oe[t])||(e="Symbol."+t,Re&&d(Ie,t)?Oe[t]=Ie[t]:Oe[t]=(ke&&we?we:Te)(e)),Oe[t]}function jt(t){return t=function(t,e){if(!y(t)||Ue(t))return t;var n=Ke(t,qe);if(n){if(n=E(n,t,e=void 0===e?"default":e),!y(n)||Ue(n))return n;throw Ve("Can't convert object to primitive value")}return ze(t,e=void 0===e?"number":e)}(t,"string"),Ue(t)?t:t+""}function Ft(c){return function(t,e,n){var r,o=_t(t),i=un(o),a=on(n,i);if(c&&e!=e){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===e)return c||a||0;return!c&&-1}}function Ut(t,e){var n,r=_t(t),o=0,i=[];for(n in r)!d(sn,n)&&d(r,n)&&fn(i,n);for(;e.length>o;)!d(r,n=e[o++])||~ln(i,n)||fn(i,n);return i}function Lt(t){return gn[t]||(gn[t]=Pt(t))}function Mt(){}function Bt(t){t.write(En("")),t.close();var e=t.parentWindow.Object;return t=null,e}function Gt(t){On[kn][t]=!0}function Kt(t,e){return(t=zn[Hn(t)])==qn||t!=Vn&&(m(e)?o(e):!!e)}function Ht(t,e){var n,r,o,i=t.target,a=t.global,c=t.stat,u=a?f:c?f[i]||he(i,{}):(f[i]||{}).prototype;if(u)for(n in e){if(r=e[n],o=t.noTargetGet?(o=Wn(u,n))&&o.value:u[n],!Jn(a?n:i+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof r==typeof o)continue;Gn(r,o)}(t.sham||o&&o.sham)&&R(r,"sham",!0),O(u,n,r,t)}}function zt(){return this}function Vt(t,e,n,r,o,i,a){function c(t){if(t===o&&g)return g;if(!fr&&t in h)return h[t];switch(t){case"keys":case dr:case hr:return function(){return new n(this,t)}}return function(){return new n(this)}}var u,s,l=n,f=e,p=void 0,p=(f+=" Iterator",l.prototype=Rn(rr,{next:An(+!p,r)}),nr(l,f,!1),In[f]=or,e+" Iterator"),d=!1,h=t.prototype,y=h[pr]||h["@@iterator"]||o&&h[o],g=!fr&&y||c(o);if((r="Array"==e&&h.entries||y)&&(l=$n(r.call(new t)))!==Object.prototype&&l.next&&($n(l)!==lr&&(cr?cr(l,lr):m(l[pr])||O(l,pr,zt)),nr(l,p,!0)),ur&&o==dr&&y&&y.name!==dr&&(sr?R(h,"name",dr):(d=!0,g=function(){return E(y,this)})),o)if(u={values:c(dr),keys:i?g:c("keys"),entries:c(hr)},a)for(s in u)!fr&&!d&&s in h||O(h,s,u[s]);else Ht({target:e,proto:!0,forced:fr||d},u);return h[pr]!==g&&O(h,pr,g,{name:o}),In[e]=g,u}var qt,Jt,Wt,Qt,Xt,Yt,$t,Zt,te,ee,f=Nt("object"==typeof globalThis&&globalThis)||Nt("object"==typeof window&&window)||Nt("object"==typeof self&&self)||Nt("object"==typeof t&&t)||function(){return this}()||Function("return this")(),ne=!o(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),t=Function.prototype,re=t.bind,oe=t.call,ie=ne&&re.bind(oe,oe),s=ne?function(t){return t&&ie(t)}:function(t){return t&&function(){return oe.apply(t,arguments)}},ae=s({}.toString),ce=s("".slice),p=function(t){return ce(ae(t),8,-1)},ue=f.Object,se=s("".split),le=o(function(){return!ue("z").propertyIsEnumerable(0)})?function(t){return"String"==p(t)?se(t,""):ue(t)}:ue,fe=f.TypeError,pe=function(t){if(null==t)throw fe("Can't call method on "+t);return t},de=Object.defineProperty,he=function(e,n){try{de(f,e,{value:n,configurable:!0,writable:!0})}catch(t){f[e]=n}return n},t="__core-js_shared__",ye=f[t]||he(t,{}),re=Dt(function(t){(t.exports=function(t,e){return ye[t]||(ye[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),ge=f.Object,me=s({}.hasOwnProperty),d=Object.hasOwn||function(t,e){return me(Ct(t),e)},ve=0,be=Math.random(),Ee=s(1..toString),m=function(t){return"function"==typeof t},t=xt("navigator","userAgent")||"",c=f.process,l=f.Deno,c=c&&c.versions||l&&l.version,l=c&&c.v8,Se=S=!(S=l?0<(v=l.split("."))[0]&&v[0]<4?1:+(v[0]+v[1]):S)&&t&&(!(v=t.match(/Edge\/(\d+)/))||74<=v[1])&&(v=t.match(/Chrome\/(\d+)/))?+v[1]:S,Re=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Se&&Se<41}),ke=Re&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Oe=re("wks"),Ie=f.Symbol,we=Ie&&Ie.for,Te=ke?Ie:Ie&&Ie.withoutSetter||Pt,y=function(t){return"object"==typeof t?null!==t:m(t)},Ae=f.String,De=f.TypeError,b=function(t){if(y(t))return t;throw De(Ae(t)+" is not an object")},c=!o(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),l=c&&o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Ne=f.document,_e=y(Ne)&&y(Ne.createElement),Ce=function(t){return _e?Ne.createElement(t):{}},Pe=!c&&!o(function(){return 7!=Object.defineProperty(Ce("div"),"a",{get:function(){return 7}}).a}),xe=Function.prototype.call,E=ne?xe.bind(xe):function(){return xe.apply(xe,arguments)},je=s({}.isPrototypeOf),Fe=f.Object,Ue=ke?function(t){return"symbol"==typeof t}:function(t){var e=xt("Symbol");return m(e)&&je(e.prototype,Fe(t))},Le=f.String,Me=function(t){try{return Le(t)}catch(t){return"Object"}},Be=f.TypeError,Ge=function(t){if(m(t))return t;throw Be(Me(t)+" is not a function")},Ke=function(t,e){t=t[e];return null==t?void 0:Ge(t)},He=f.TypeError,ze=function(t,e){var n,r;if("string"===e&&m(n=t.toString)&&!y(r=E(n,t)))return r;if(m(n=t.valueOf)&&!y(r=E(n,t)))return r;if("string"!==e&&m(n=t.toString)&&!y(r=E(n,t)))return r;throw He("Can't convert object to primitive value")},Ve=f.TypeError,qe=a("toPrimitive"),Je=f.TypeError,We=Object.defineProperty,Qe=Object.getOwnPropertyDescriptor,Xe="enumerable",Ye="configurable",$e="writable",g={f:c?l?function(t,e,n){var r;return b(t),e=jt(e),b(n),"function"==typeof t&&"prototype"===e&&"value"in n&&$e in n&&!n[$e]&&((r=Qe(t,e))&&r[$e]&&(t[e]=n.value,n={configurable:(Ye in n?n:r)[Ye],enumerable:(Xe in n?n:r)[Xe],writable:!1})),We(t,e,n)}:We:function(t,e,n){if(b(t),e=jt(e),b(n),Pe)try{return We(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Je("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ze=Math.ceil,tn=Math.floor,en=function(t){t=+t;return t!=t||0==t?0:(0<t?tn:Ze)(t)},nn=Math.max,rn=Math.min,on=function(t,e){t=en(t);return t<0?nn(t+e,0):rn(t,e)},an=Math.min,cn=function(t){return 0<t?an(en(t),9007199254740991):0},un=function(t){return cn(t.length)},t={includes:Ft(!0),indexOf:Ft(!1)},sn={},ln=t.indexOf,fn=s([].push),pn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],dn=Object.keys||function(t){return Ut(t,pn)},hn={f:c&&!l?Object.defineProperties:function(t,e){b(t);for(var n,r=_t(e),o=dn(e),i=o.length,a=0;a<i;)g.f(t,n=o[a++],r[n]);return t}},yn=xt("document","documentElement"),gn=re("keys"),mn="prototype",vn="script",bn=Lt("IE_PROTO"),En=function(t){return"<"+vn+">"+t+"</"+vn+">"},Sn=function(){try{qt=new ActiveXObject("htmlfile")}catch(t){}Sn="undefined"==typeof document||document.domain&&qt?Bt(qt):(t=Ce("iframe"),e="java"+vn+":",t.style.display="none",yn.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(En("document.F=Object")),e.close(),e.F);for(var t,e,n=pn.length;n--;)delete Sn[mn][pn[n]];return Sn()},Rn=(sn[bn]=!0,Object.create||function(t,e){var n;return null!==t?(Mt[mn]=b(t),n=new Mt,Mt[mn]=null,n[bn]=t):n=Sn(),void 0===e?n:hn.f(n,e)}),kn=a("unscopables"),On=Array.prototype,In=(null==On[kn]&&g.f(On,kn,{configurable:!0,value:Rn(null)}),{}),wn=s(Function.toString),Tn=(m(ye.inspectSource)||(ye.inspectSource=function(t){return wn(t)}),ye.inspectSource),v=f.WeakMap,S=m(v)&&/native code/.test(Tn(v)),An=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},R=c?function(t,e,n){return g.f(t,e,An(1,n))}:function(t,e,n){return t[e]=n,t},Dn="Object already initialized",Nn=f.TypeError,t=f.WeakMap,k=(Zt=S||ye.state?(Jt=ye.state||(ye.state=new t),Wt=s(Jt.get),Qt=s(Jt.has),Xt=s(Jt.set),Yt=function(t,e){if(Qt(Jt,t))throw new Nn(Dn);return e.facade=t,Xt(Jt,t,e),e},$t=function(t){return Wt(Jt,t)||{}},function(t){return Qt(Jt,t)}):(te=Lt("state"),sn[te]=!0,Yt=function(t,e){if(d(t,te))throw new Nn(Dn);return e.facade=t,R(t,te,e),e},$t=function(t){return d(t,te)?t[te]:{}},function(t){return d(t,te)}),{set:Yt,get:$t,has:Zt,enforce:function(t){return Zt(t)?$t(t):Yt(t,{})},getterFor:function(e){return function(t){if(y(t)&&(t=$t(t)).type===e)return t;throw Nn("Incompatible receiver, "+e+" required")}}}),l={}.propertyIsEnumerable,_n=Object.getOwnPropertyDescriptor,Cn={f:_n&&!l.call({1:2},1)?function(t){t=_n(this,t);return!!t&&t.enumerable}:l},Pn=Object.getOwnPropertyDescriptor,xn={f:c?Pn:function(t,e){if(t=_t(t),e=jt(e),Pe)try{return Pn(t,e)}catch(t){}if(d(t,e))return An(!E(Cn.f,t,e),t[e])}},v=Function.prototype,t=c&&Object.getOwnPropertyDescriptor,l=d(v,"name"),jn={EXISTS:l,PROPER:l&&"something"===function(){}.name,CONFIGURABLE:l&&(!c||t(v,"name").configurable)},O=Dt(function(t){var u=jn.CONFIGURABLE,e=k.get,s=k.enforce,l=String(String).split("String");(t.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet,r=r&&void 0!==r.name?r.name:e;m(n)&&("Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!d(n,"name")||u&&n.name!==r)&&R(n,"name",r),(o=s(n)).source||(o.source=l.join("string"==typeof r?r:""))),t===f?a?t[e]=n:he(e,n):(i?!c&&t[e]&&(a=!0):delete t[e],a?t[e]=n:R(t,e,n))})(Function.prototype,"toString",function(){return m(this)&&e(this).source||Tn(this)})}),Fn=pn.concat("length","prototype"),Un={f:Object.getOwnPropertyNames||function(t){return Ut(t,Fn)}},Ln={f:Object.getOwnPropertySymbols},Mn=s([].concat),Bn=xt("Reflect","ownKeys")||function(t){var e=Un.f(b(t)),n=Ln.f;return n?Mn(e,n(t)):e},Gn=function(t,e,n){for(var r=Bn(e),o=g.f,i=xn.f,a=0;a<r.length;a++){var c=r[a];d(t,c)||n&&d(n,c)||o(t,c,i(e,c))}},Kn=/#|\.prototype\./,Hn=Kt.normalize=function(t){return String(t).replace(Kn,".").toLowerCase()},zn=Kt.data={},Vn=Kt.NATIVE="N",qn=Kt.POLYFILL="P",Jn=Kt,Wn=xn.f,l=!o(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Qn=Lt("IE_PROTO"),Xn=f.Object,Yn=Xn.prototype,$n=l?Xn.getPrototypeOf:function(t){t=Ct(t);if(d(t,Qn))return t[Qn];var e=t.constructor;return m(e)&&t instanceof e?e.prototype:t instanceof Xn?Yn:null},Zn=a("iterator"),t=!1,v=([].keys&&("next"in(v=[].keys())?(l=$n($n(v)))!==Object.prototype&&(ee=l):t=!0),null==ee||o(function(){var t={};return ee[Zn].call(t)!==t})),l=(m((ee=v?{}:ee)[Zn])||O(ee,Zn,function(){return this}),{IteratorPrototype:ee,BUGGY_SAFARI_ITERATORS:t}),tr=g.f,er=a("toStringTag"),nr=function(t,e,n){(t=t&&!n?t.prototype:t)&&!d(t,er)&&tr(t,er,{configurable:!0,value:e})},rr=l.IteratorPrototype,or=function(){return this},ir=f.String,ar=f.TypeError,cr=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return b(t),function(t){if("object"==typeof t||m(t))return;throw ar("Can't set "+ir(t)+" as a prototype")}(e),r?n(t,e):t.__proto__=e,t}}():void 0),ur=jn.PROPER,sr=jn.CONFIGURABLE,lr=l.IteratorPrototype,fr=l.BUGGY_SAFARI_ITERATORS,pr=a("iterator"),dr="values",hr="entries",v=g.f,yr="Array Iterator",gr=k.set,mr=k.getterFor(yr),vr=Vt(Array,"Array",function(t,e){gr(this,{type:yr,target:_t(t),index:0,kind:e})},function(){var t=mr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),t=In.Arguments=In.Array;if(Gt("keys"),Gt("values"),Gt("entries"),c&&"values"!==t.name)try{v(t,"name",{value:"values"})}catch(t){}function br(t){if("Symbol"===Nr(t))throw TypeError("Cannot convert a Symbol value to a string");return _r(t)}function Er(o){return function(t,e){var n,t=br(pe(t)),e=en(e),r=t.length;return e<0||r<=e?o?"":void 0:(n=Pr(t,e))<55296||56319<n||e+1===r||(r=Pr(t,e+1))<56320||57343<r?o?Cr(t,e):n:o?xr(t,e,e+2):r-56320+(n-55296<<10)+65536}}function Sr(t,e,n){for(var r in e)O(t,r,e[r],n)}function Rr(t,e){return Ge(t),void 0===e?t:ne?Xr(t,e):function(){return t.apply(e,arguments)}}function kr(t,e,n){var r,o;b(t);try{if(!(r=Ke(t,"return"))){if("throw"===e)throw n;return}r=E(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;b(r)}function Or(t,e){this.stopped=t,this.result=e}function Ir(t,e,n){function r(t){return i&&kr(i,"normal",t),new Or(!0,t)}function o(t){return p?(b(t),h?y(t[0],t[1],r):y(t[0],t[1])):h?y(t,r):y(t)}var i,a,c,u,s,l,f=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),y=Rr(e,f);if(d)i=t;else{if(!(n=to(t)))throw no(Me(t)+" is not iterable");if(void 0!==(e=n)&&(In.Array===e||$r[Yr]===e)){for(a=0,c=un(t);a<c;a++)if((u=o(t[a]))&&je(ro,u))return;return}i=function(t,e){e=arguments.length<2?to(t):e;if(Ge(e))return b(E(e,t));throw eo(Me(t)+" is not iterable")}(t,n)}for(s=i.next;!(l=E(s,i)).done;){try{u=o(l.value)}catch(t){kr(i,"throw",t)}if("object"==typeof u&&u&&je(ro,u))return}}function wr(t,e){if(!je(e,t))throw oo("Incorrect invocation")}var l={},v=(l[a("toStringTag")]="z","[object z]"===String(l)),Tr=a("toStringTag"),Ar=f.Object,Dr="Arguments"==p(function(){return arguments}()),Nr=v?p:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Ar(t),Tr))?e:Dr?p(t):"Object"==(e=p(t))&&m(t.callee)?"Arguments":e},_r=(v||O(Object.prototype,"toString",v?{}.toString:function(){return"[object "+Nr(this)+"]"},{unsafe:!0}),f.String),Cr=s("".charAt),Pr=s("".charCodeAt),xr=s("".slice),t={codeAt:Er(!1),charAt:Er(!0)},jr=t.charAt,Fr="String Iterator",Ur=k.set,Lr=k.getterFor(Fr),Mr=(Vt(String,"String",function(t){Ur(this,{type:Fr,string:br(t),index:0})},function(){var t=Lr(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(e=jr(e,n),t.index+=e.length,{value:e,done:!1})}),function(t,e,n){e=jt(e);e in t?g.f(t,e,An(0,n)):t[e]=n}),Br=f.Array,Gr=Math.max,Kr=function(t,e,n){for(var r=un(t),o=on(e,r),i=on(void 0===n?r:n,r),a=Br(Gr(i-o,0)),c=0;o<i;o++,c++)Mr(a,c,t[o]);return a.length=c,a},Hr=Un.f,zr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Vr={f:function(t){if(!zr||"Window"!=p(t))return Hr(_t(t));try{return Hr(t)}catch(t){return Kr(zr)}}},qr=o(function(){var t;"function"==typeof ArrayBuffer&&(t=new ArrayBuffer(8),Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8}))}),Jr=Object.isExtensible,Wr=o(function(){Jr(1)})||qr?function(t){return!!y(t)&&((!qr||"ArrayBuffer"!=p(t))&&(!Jr||Jr(t)))}:Jr,Qr=!o(function(){return Object.isExtensible(Object.preventExtensions({}))}),l=Dt(function(t){function n(t){e(t,a,{value:{objectID:"O"+o++,weakData:{}}})}var e=g.f,r=!1,a=Pt("meta"),o=0,c=t.exports={enable:function(){c.enable=function(){},r=!0;var o=Un.f,i=s([].splice),t={};t[a]=1,o(t).length&&(Un.f=function(t){for(var e=o(t),n=0,r=e.length;n<r;n++)if(e[n]===a){i(e,n,1);break}return e},Ht({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Vr.f}))},fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!d(t,a)){if(!Wr(t))return"F";if(!e)return"E";n(t)}return t[a].objectID},getWeakData:function(t,e){if(!d(t,a)){if(!Wr(t))return!0;if(!e)return!1;n(t)}return t[a].weakData},onFreeze:function(t){return Qr&&r&&Wr(t)&&!d(t,a)&&n(t),t}};sn[a]=!0}),Xr=(l.enable,l.fastKey,l.getWeakData,l.onFreeze,s(s.bind)),Yr=a("iterator"),$r=Array.prototype,Zr=a("iterator"),to=function(t){if(null!=t)return Ke(t,Zr)||Ke(t,"@@iterator")||In[Nr(t)]},eo=f.TypeError,no=f.TypeError,ro=Or.prototype,oo=f.TypeError,io=a("iterator"),ao=!1;try{var co=0,uo={next:function(){return{done:!!co++}},return:function(){ao=!0}};uo[io]=function(){return this},Array.from(uo,function(){throw 2})}catch(t){}function so(){}function lo(t){if(!m(t))return!1;try{return No(so,Do,t),!0}catch(t){return!1}}function fo(t){if(!m(t))return!1;switch(Nr(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Po||!!Co(_o,Tn(t))}catch(t){return!0}}function po(t,e){return new(Uo(t))(0===e?0:e)}function ho(p){var d=1==p,h=2==p,y=3==p,g=4==p,m=6==p,v=7==p,b=5==p||m;return function(t,e,n,r){for(var o,i,a=Ct(t),c=le(a),u=Rr(e,n),s=un(c),l=0,e=r||po,f=d?e(t,s):h||v?e(t,0):void 0;l<s;l++)if((b||l in c)&&(i=u(o=c[l],l,a),p))if(d)f[l]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return l;case 2:Lo(f,o)}else switch(p){case 4:return!1;case 7:Lo(f,o)}return m?-1:y||g?g:f}}function yo(t){return t.frozen||(t.frozen=new go)}function go(){this.entries=[]}function mo(t,e){return Ko(t.entries,function(t){return t[0]===e})}function vo(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}var bo,Eo,So,I,Ro,w,ko,T,Oo,Io,wo,To,Ao=Array.isArray||function(t){return"Array"==p(t)},Do=[],No=xt("Reflect","construct"),_o=/^\s*(?:class|function)\b/,Co=s(_o.exec),Po=!_o.exec(so),xo=(fo.sham=!0,!No||o(function(){var t;return lo(lo.call)||!lo(Object)||!lo(function(){t=!0})||t})?fo:lo),jo=a("species"),Fo=f.Array,Uo=function(t){var e;return Ao(t)&&(e=t.constructor,(xo(e)&&(e===Fo||Ao(e.prototype))||y(e)&&null===(e=e[jo]))&&(e=void 0)),void 0===e?Fo:e},Lo=s([].push),v={forEach:ho(0),map:ho(1),filter:ho(2),some:ho(3),every:ho(4),find:ho(5),findIndex:ho(6),filterReject:ho(7)},Mo=l.getWeakData,Bo=k.set,Go=k.getterFor,Ko=v.find,Ho=v.findIndex,zo=s([].splice),Vo=0,uo=(go.prototype={get:function(t){t=mo(this,t);if(t)return t[1]},has:function(t){return!!mo(this,t)},set:function(t,e){var n=mo(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(e){var t=Ho(this.entries,function(t){return t[0]===e});return~t&&zo(this.entries,t,1),!!~t}},{getConstructor:function(t,n,r,o){function i(t,e,n){var r=c(t),o=Mo(b(e),!0);return!0===o?yo(r).set(e,n):o[r.id]=n,t}var t=t(function(t,e){wr(t,a),Bo(t,{type:n,id:Vo++,frozen:void 0}),null!=e&&Ir(e,t[o],{that:t,AS_ENTRIES:r})}),a=t.prototype,c=Go(n);return Sr(a,{delete:function(t){var e=c(this);if(!y(t))return!1;var n=Mo(t);return!0===n?yo(e).delete(t):n&&d(n,e.id)&&delete n[e.id]},has:function(t){var e=c(this);if(!y(t))return!1;var n=Mo(t);return!0===n?yo(e).has(t):n&&d(n,e.id)}}),Sr(a,r?{get:function(t){var e,n=c(this);if(y(t))return!0===(e=Mo(t))?yo(n).get(t):e?e[n.id]:void 0},set:function(t,e){return i(this,t,e)}}:{add:function(t){return i(this,t,!0)}}),t}}),qo=k.enforce,Jo=!f.ActiveXObject&&"ActiveXObject"in f,Wo=(N=vo,vi=uo,So=-1!==(D="WeakMap").indexOf("Map"),I=-1!==D.indexOf("Weak"),Ro=So?"set":"add",w=f[D],ko=w&&w.prototype,mi={},Jn(D,!m(T=w)||!(I||ko.forEach&&!o(function(){(new w).entries().next()})))?(T=vi.getConstructor(N,D,So,Ro),l.enable()):Jn(D,!0)&&(ei=(Eo=new T)[Ro](I?{}:-0,1)!=Eo,Zo=o(function(){Eo.has(1)}),Wo=function(t,e){if(!e&&!ao)return!1;var n=!1;try{var r={};r[io]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}(function(t){new w(t)}),ti=!I&&o(function(){for(var t=new w,e=5;e--;)t[Ro](e,e);return!t.has(-0)}),Wo||(((T=N(function(t,e){wr(t,ko);n=new w,t=t,r=T,cr&&m(t=t.constructor)&&t!==r&&y(t=t.prototype)&&t!==r.prototype&&cr(n,t);var n,r=n;return null!=e&&Ir(e,r[Ro],{that:r,AS_ENTRIES:So}),r})).prototype=ko).constructor=T),(Zo||ti)&&(Qo("delete"),Qo("has"),So&&Qo("get")),(ti||ei)&&Qo(Ro),I&&ko.clear&&delete ko.clear),mi[D]=T,Ht({global:!0,forced:T!=w},mi),nr(T,D),I||vi.setStrong(T,D,So),T);function Qo(t){var n=s(ko[t]);O(ko,t,"add"==t?function(t){return n(this,0===t?0:t),this}:"delete"==t?function(t){return!(I&&!y(t))&&n(this,0===t?0:t)}:"get"==t?function(t){return I&&!y(t)?void 0:n(this,0===t?0:t)}:"has"==t?function(t){return!(I&&!y(t))&&n(this,0===t?0:t)}:function(t,e){return n(this,0===t?0:t,e),this})}S&&Jo&&(bo=uo.getConstructor(vo,"WeakMap",!0),l.enable(),N=Wo.prototype,Oo=s(N.delete),Io=s(N.has),wo=s(N.get),To=s(N.set),Sr(N,{delete:function(t){var e;return y(t)&&!Wr(t)?((e=qo(this)).frozen||(e.frozen=new bo),Oo(this,t)||e.frozen.delete(t)):Oo(this,t)},has:function(t){var e;return y(t)&&!Wr(t)?((e=qo(this)).frozen||(e.frozen=new bo),Io(this,t)||e.frozen.has(t)):Io(this,t)},get:function(t){var e;return y(t)&&!Wr(t)?((e=qo(this)).frozen||(e.frozen=new bo),Io(this,t)?wo(this,t):e.frozen.get(t)):wo(this,t)},set:function(t,e){var n;return y(t)&&!Wr(t)?((n=qo(this)).frozen||(n.frozen=new bo),Io(this,t)?To(this,t,e):n.frozen.set(t,e)):To(this,t,e),this}}));function Xo(e,t){if(e){if(e[ni]!==oi)try{R(e,ni,oi)}catch(t){e[ni]=oi}if(e[ri]||R(e,ri,t),$o[t])for(var n in vr)if(e[n]!==vr[n])try{R(e,n,vr[n])}catch(t){e[n]=vr[n]}}}var Yo,$o={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Zo=Ce("span").classList,ti=Zo&&Zo.constructor&&Zo.constructor.prototype,ei=ti===Object.prototype?void 0:ti,ni=a("iterator"),ri=a("toStringTag"),oi=vr.values;for(Yo in $o)Xo(f[Yo]&&f[Yo].prototype,Yo);Xo(ei,"DOMTokenList");function ii(){var t=b(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function ai(t,e){var n,t=b(t).constructor;if(void 0===t||null==(n=b(t)[Bi]))return e;if(xo(t=n))return t;throw Mi(Me(t)+" is not a constructor")}function ci(t,e){var n=t.exec;if(m(n))return null!==(n=E(n,t,e))&&b(n),n;if("RegExp"===p(t))return E(Ci,t,e);throw Ki("RegExp#exec called on incompatible receiver")}function ui(e){return 51<=Se||!o(function(){var t=[];return(t.constructor={})[ia]=function(){return{foo:1}},1!==t[e](Boolean).foo})}function si(t,e){var n=C.sendBird;n?((n=n.getInstance().GroupChannel.createMyGroupChannelListQuery()).customTypesFilter=[ha],n.channelUrlsFilter=t,n.includeEmpty=!0,n.next(e)):C.callback(null,P.create(P.Type.ERROR_SENDBIRD_SDK_MISSING),e)}function li(e,i){var a=ya.Status.OPEN,t=(a=ya.isStatus(e.status)?e.status:a)!==ya.Status.CLOSED?"status=ASSIGNED&status=UNASSIGNED":"status=CLOSED",t="".concat(C.apiHost,"/tickets/")+"?".concat(x.getParam,"&limit=").concat(e.limit||ya.defaultLimit,"&offset=").concat(e.offset||0)+"&".concat(t,"&order=").concat(e.order||"-updated_at");e&&"all"===e.status&&(t="".concat(C.apiHost,"/tickets/")+"?".concat(x.getParam,"&limit=").concat(e.limit||ya.defaultLimit,"&offset=").concat(e.offset||0)+"&order=".concat(e.order||"-updated_at")),e.channelUrl&&(t+="&channelUrl=".concat(e.channelUrl)),e.customFieldFilter&&"object"===F(e.customFieldFilter)&&(t+="&customFields="+encodeURIComponent(Object.keys(e.customFieldFilter).map(function(t){return"".concat(t,":").concat(encodeURIComponent(e.customFieldFilter[t]))}).join(","))),h.create({headers:x.header}).get(t).then(function(t){if(t&&t.data){var e,r=[],n=[];for(e in t.data.results){var o=new ya(t.data.results[e]);j[o.channelUrl]=o,n.push(o.channelUrl),r.push(o)}si(n,function(t,e){var t=C.getParamsFromCallback(t,e),n=t.result;t.err||r.forEach(function(t){for(var e in n){e=n[e];if(t.channelUrl===e.url){t.channel=e;break}}}),_.write("[REQ] ".concat(a," ticket list:"),r),C.callback(r,t.err,i)})}else C.callback([],null,i)}).catch(function(t){return C.callback(null,t,i)})}var fi,pi,A,di,hi,yi,gi=f.RegExp,mi=o(function(){var t=gi("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),vi=mi||o(function(){return!gi("a","y").sticky}),D={BROKEN_CARET:mi||o(function(){var t=gi("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:vi,UNSUPPORTED_Y:mi},bi=f.RegExp,S=o(function(){var t=bi(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),Ei=f.RegExp,Jo=o(function(){var t=Ei("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),Si=k.get,Ri=re("native-string-replace",String.prototype.replace),ki=RegExp.prototype.exec,Oi=ki,Ii=s("".charAt),wi=s("".indexOf),Ti=s("".replace),Ai=s("".slice),Di=(uo=/b*/g,E(ki,l=/a/,"a"),E(ki,uo,"a"),0!==l.lastIndex||0!==uo.lastIndex),Ni=D.BROKEN_CARET,_i=void 0!==/()??/.exec("")[1],Ci=Oi=Di||_i||Ni||S||Jo?function(t){var e,n,r,o,i,a,c=this,u=Si(c),t=br(t),s=u.raw;if(s)return s.lastIndex=c.lastIndex,f=E(Oi,s,t),c.lastIndex=s.lastIndex,f;var l=u.groups,s=Ni&&c.sticky,f=E(ii,c),u=c.source,p=0,d=t;if(s&&(f=Ti(f,"y",""),-1===wi(f,"g")&&(f+="g"),d=Ai(t,c.lastIndex),0<c.lastIndex&&(!c.multiline||c.multiline&&"\n"!==Ii(t,c.lastIndex-1))&&(u="(?: "+u+")",d=" "+d,p++),e=new RegExp("^(?:"+u+")",f)),_i&&(e=new RegExp("^"+u+"$(?!\\s)",f)),Di&&(n=c.lastIndex),r=E(ki,s?e:c,d),s?r?(r.input=Ai(r.input,p),r[0]=Ai(r[0],p),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:Di&&r&&(c.lastIndex=c.global?r.index+r[0].length:n),_i&&r&&1<r.length&&E(Ri,r[0],e,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r&&l)for(r.groups=i=Rn(null),o=0;o<l.length;o++)i[(a=l[o])[0]]=r[a[1]];return r}:Oi,N=(Ht({target:"RegExp",proto:!0,forced:/./.exec!==Ci},{exec:Ci}),Function.prototype),Pi=N.apply,xi=N.call,ji="object"==typeof Reflect&&Reflect.apply||(ne?xi.bind(Pi):function(){return xi.apply(Pi,arguments)}),Fi=a("species"),Ui=RegExp.prototype,Li=a("match"),Mi=f.TypeError,Bi=a("species"),Gi=t.charAt,Ki=f.TypeError,Hi=D.UNSUPPORTED_Y,zi=4294967295,Vi=Math.min,qi=[].push,Ji=s(/./.exec),Wi=s(qi),Qi=s("".slice),vi=!o(function(){var t=/(?:)/,e=t.exec,t=(t.exec=function(){return e.apply(this,arguments)},"ab".split(t));return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),_=(mi=function(o,g,m){var v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=br(pe(this)),r=void 0===e?zi:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!y(e=t)||(void 0!==(u=e[Li])?!u:"RegExp"!=p(e)))return E(g,n,t,r);for(var o,i,a,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=new RegExp(t.source,u+"g");(o=E(Ci,l,n))&&!(s<(i=l.lastIndex)&&(Wi(c,Qi(n,s,o.index)),1<o.length&&o.index<n.length&&ji(qi,c,Kr(o,1)),a=o[0].length,s=i,r<=c.length));)l.lastIndex===o.index&&l.lastIndex++;return s===n.length?!a&&Ji(l,"")||Wi(c,""):Wi(c,Qi(n,s)),r<c.length?Kr(c,0,r):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:E(g,this,t,e)}:g;return[function(t,e){var n=pe(this),r=null==t?void 0:Ke(t,o);return r?E(r,t,n,e):E(v,br(n),t,e)},function(t,e){var n=b(this),r=br(t),t=m(v,n,r,e,v!==g);if(t.done)return t.value;var t=ai(n,RegExp),o=n.unicode,i=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(Hi?"g":"y"),a=new t(Hi?"^(?:"+n.source+")":n,i),c=void 0===e?zi:e>>>0;if(0==c)return[];if(0===r.length)return null===ci(a,r)?[r]:[];for(var u,s,l=0,f=0,p=[];f<r.length;){a.lastIndex=Hi?0:f;var d,h=ci(a,Hi?Qi(r,f):r);if(null===h||(d=Vi(cn(a.lastIndex+(Hi?f:0)),r.length))===l)u=r,f=(s=f)+(o?Gi(u,s).length:1);else{if(Wi(p,Qi(r,l,f)),p.length===c)return p;for(var y=1;y<=h.length-1;y++)if(Wi(p,h[y]),p.length===c)return p;f=l=d}}return Wi(p,Qi(r,l)),p}]},re=!vi,l=Hi,A=a(fi="split"),di=!o(function(){var t={};return t[A]=function(){return 7},7!=""[fi](t)}),S=di&&!o(function(){var t=!1,e=/a/;return"split"===fi&&((e={constructor:{}}).constructor[Fi]=function(){return e},e.flags="",e[A]=/./[A]),e.exec=function(){return t=!0,null},e[A](""),!t}),di&&S&&!re||(pi=s(/./[A]),S=mi(A,""[fi],function(t,e,n,r,o){var t=s(t),i=e.exec;return i===Ci||i===Ui.exec?di&&!o?{done:!0,value:pi(e,n,r)}:{done:!0,value:t(n,e,r)}:{done:!1}}),O(String.prototype,fi,S[0]),O(Ui,A,S[1])),l&&R(Ui[A],"sham",!0),function(){function t(){i(this,t)}return n(t,null,[{key:"write",value:function(){var t;C.isDebugMode&&(t=console).log.apply(t,arguments)}},{key:"error",value:function(){var t;C.isDebugMode&&(t=console).error.apply(t,arguments)}}]),t}()),Xi=new WeakMap,Yi=null,$i=null,C=function(){function r(){i(this,r)}return n(r,null,[{key:"sendBird",get:function(){return Yi},set:function(t){Yi=t}},{key:"isDebugMode",get:function(){return Xi.get(this)}},{key:"setDebugMode",value:function(){Xi.set(this,!0)}},{key:"unsetDebugMode",value:function(){Xi.set(this,!1)}},{key:"apiHost",get:function(){var t;return $i||(t=Yi.getInstance(),$i="https://desk-api-".concat(t.getApplicationId(),".sendbird.com/sapi")),$i},set:function(t){$i=t}},{key:"sdkVersion",get:function(){return"1.0.21"}},{key:"minSendBirdVersion",get:function(){return"3.0.55"}},{key:"getParamsFromCallback",value:function(t,e){return{result:t,err:e,reversed:!1}}},{key:"callback",value:function(t,e,n){n&&((t=r.getParamsFromCallback(t,e)).err&&_.error(t.err),t.reversed?n(t.err,t.result):n(t.result,t.err))}},{key:"isSendBirdSdkCompatible",value:function(t){var e,n="3.0.55".split("."),r=t.split(".");if(n.length!==r.length)return!1;for(e in n){if(parseInt(n[e])<parseInt(r[e]))return!0;if(parseInt(n[e])>parseInt(r[e]))return!1}return!0}}]),r}(),Jo=jn.EXISTS,N=g.f,t=Function.prototype,Zi=s(t.toString),ta=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,ea=s(ta.exec),na=(c&&!Jo&&N(t,"name",{configurable:!0,get:function(){try{return ea(ta,Zi(this))[1]}catch(t){return""}}}),{ERROR_SENDBIRD_SDK_MISSING:{code:100,message:"SendBird SDK is missing."},ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED:{code:101,message:"This SendBird SDK version is not supported."},ERROR_SENDBIRD_DESK_INIT_MISSING:{code:102,message:"SendBird Desk SDK is not initialized. It should be done before authentication."},ERROR_SENDBIRD_SDK_MESSAGE_LIST_FAILED:{code:200,message:"Cannot load messages in SDK client."},ERROR_INVALID_PARAMETER:{code:403,message:"Invalid parameter."},ERROR_DATA_NOT_FOUND:{code:404,message:"Data not found."},ERROR_REQUEST_TIMEOUT:{code:409,message:"Request timed-out."},ERROR_REQUEST:{code:500,message:"Request failed."},ERROR_REQUEST_CANCELED:{code:501,message:"Request canceled."}}),P=function(t){var e=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t);var r=z(o);function o(t,e){var n;return i(this,o),n=r.call(this,t),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(H(n),n.constructor):n.stack=new Error(t).stack,n.name="SendBirdDeskError",n.message=t,n.code=e,n}return n(o,null,[{key:"Type",get:function(){return na}},{key:"create",value:function(t){return t?new o(t.message,t.code):new Error("SendBirdDeskError type missing.")}},{key:"throw",value:function(t){if(t)throw new o(t.message,t.code)}}]),o}(K(Error)),ra=new f.WeakMap,x=function(){function t(){i(this,t)}return n(t,null,[{key:"connect",value:function(t,e,n){var r,o=this,i=("function"==typeof e&&(n=e,e=""),C.sendBird);i?(i=i.getInstance(),r="".concat(C.apiHost,"/customers/auth/"),e={sendbirdAccessToken:e||"","content-type":"application/json"},i={sendbirdAppId:i.getApplicationId(),sendbirdId:t},h.create({headers:e}).post(r,i).then(function(t){ra.set(o,{deskToken:t.data.token}),_.write("[REQ] connection established"),C.callback(t.data,null,n)}).catch(function(t){C.callback(null,t,n)})):C.callback(null,P.create(P.Type.ERROR_SENDBIRD_SDK_MISSING),n)}},{key:"header",get:function(){return{sendbirdDeskToken:ra.get(this).deskToken,"content-type":"application/json","user-agent":"desk-js@".concat("1.0.21")}}},{key:"getParam",get:function(){var t=C.sendBird;return t?(t=t.getInstance(),"sendbirdAppId=".concat(t.getApplicationId())):""}},{key:"postParam",get:function(){var t=C.sendBird;return t?{sendbirdAppId:t.getInstance().getApplicationId()}:{}}}]),t}(),oa=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.userId=t?t.user:0,this.name=t?t.displayName:"",this.profileUrl=t?t.photoThumbnailUrl:""}}]),e}(),ia=a("species"),aa=a("isConcatSpreadable"),ca=9007199254740991,ua="Maximum allowed index exceeded",sa=f.TypeError,D=51<=Se||!o(function(){var t=[];return t[aa]=!1,t.concat()[0]!==t}),vi=ui("concat"),la=(Ht({target:"Array",proto:!0,forced:!D||!vi},{concat:function(t){for(var e,n,r,o=Ct(this),i=po(o,0),a=0,c=-1,u=arguments.length;c<u;c++)if(function(t){if(!y(t))return!1;var e=t[aa];return void 0!==e?!!e:Ao(t)}(r=-1===c?o:arguments[c])){if(n=un(r),ca<a+n)throw sa(ua);for(e=0;e<n;e++,a++)e in r&&Mr(i,a,r[e])}else{if(ca<=a)throw sa(ua);Mr(i,a++,r)}return i.length=a,i}}),s([].join)),re=le!=Object,mi=(hi=",",!!(yi=[]["join"])&&o(function(){yi.call(null,hi||function(){return 1},1)})),fa=(Ht({target:"Array",proto:!0,forced:re||!mi},{join:function(t){return la(_t(this),void 0===t?",":t)}}),v.map),S=ui("map"),l=(Ht({target:"Array",proto:!0,forced:!S},{map:function(t){return fa(this,t,1<arguments.length?arguments[1]:void 0)}}),o(function(){dn(1)})),pa=(Ht({target:"Object",stat:!0,forced:l},{keys:function(t){return dn(Ct(t))}}),function(){function t(){i(this,t)}return n(t,null,[{key:"CustomType",get:function(){return{RICH_MESSAGE:"SENDBIRD_DESK_RICH_MESSAGE",ADMIN_MESSAGE:"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"}}},{key:"DataType",get:function(){return{TICKET_INQUIRE_CLOSURE:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",TICKET_ASSIGN:"TICKET_ASSIGN",TICKET_TRANSFER:"TICKET_TRANSFER",TICKET_CLOSE:"TICKET_CLOSE",TICKET_FEEDBACK:"SENDBIRD_DESK_CUSTOMER_SATISFACTION",URL_PREVIEW:"SENDBIRD_DESK_URL_PREVIEW"}}},{key:"ClosureState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED"}}},{key:"FeedbackState",get:function(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED"}}},{key:"UrlRegExp",get:function(){return/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/gi}}]),t}()),da=function(){function e(t){i(this,e),this.fetchFromJSON(t)}return n(e,[{key:"fetchFromJSON",value:function(t){this.channelUrl=t?t.channel_url:"",this.name=t?t.name:""}}]),e}(),ha="SENDBIRD_DESK_CHANNEL_CUSTOM_TYPE",j={},ya=function(){function d(t){i(this,d),this.fetchFromJSON(t)}return n(d,[{key:"fetchFromJSON",value:function(t){if(this.id=t?t.id:0,this.title=t?t.channelName:"",this.status=t?t.status:"",this.info=t&&t.info?JSON.parse(t.info):null,this.priority=t?t.priority:d.Priority.MEDIUM,this.agent=t&&t.recentAssignment&&t.recentAssignment.agent?new oa(t.recentAssignment.agent):null,this.customer=t?t.customer:null,this.customFields={},this.group=t?t.group:0,this.relatedChannels=[],this.channel=this.channel,this.channelUrl=t?t.channelUrl:null,this.updatedAt=(t?new Date(t.updatedAt):new Date).getTime(),t&&t.customFields)for(var e=t.customFields,n=0;n<e.length;n++){var r=e[n].key,o=e[n].value;this.customFields[r]=o}if(t&&t.relatedChannels)try{var i=JSON.parse(t.relatedChannels);Array.isArray(i)&&(this.relatedChannels=i.map(function(t){return new da(t)}))}catch(t){}}},{key:"refresh",value:function(n){var r=this,t="".concat(C.apiHost,"/tickets/").concat(this.id,"/?").concat(x.getParam);h.create({headers:x.header}).get(t).then(function(t){r.fetchFromJSON(t.data),si([r.channelUrl],function(t,e){t=C.getParamsFromCallback(t,e).result;0<t.length&&(r.channel=t[0]),j[r.channelUrl]=r,_.write("[REQ] ticket refresh:",r),C.callback(r,null,n)})}).catch(function(t){return C.callback(null,t,n)})}},{key:"reopen",value:function(n){var r=this,t="".concat(C.apiHost,"/tickets/").concat(this.id,"/reopen"),e=x.postParam;h.create({headers:x.header}).patch(t,e).then(function(t){t&&t.data&&t.data.channelUrl?(r.fetchFromJSON(t.data),si([r.channelUrl],function(t,e){t=C.getParamsFromCallback(t,e).result;0<t.length&&(r.channel=t[0]),j[r.channelUrl]=r,_.write("[REQ] ticket reopen:",r),C.callback(r,null,n)})):C.callback(r,null,n)}).catch(function(t){return C.callback(null,t,n)})}},{key:"cancel",value:function(t,n){var e,r,o=this;"function"==typeof t&&(n=t,t=null),t&&"string"!=typeof t?C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),n):(e="".concat(C.apiHost,"/tickets/").concat(this.id,"/cancel"),r=x.postParam,t&&(r.groupKeyForTransfer=t),h.create({headers:x.header}).patch(e,r).then(function(t){t&&t.data&&t.data.channelUrl?(o.fetchFromJSON(t.data),si([o.channelUrl],function(t,e){t=C.getParamsFromCallback(t,e).result;0<t.length&&(o.channel=t[0]),j[o.channelUrl]=o,_.write("[REQ] ticket cancel:",o),C.callback(o,null,n)})):C.callback(o,null,n)}).catch(function(t){return C.callback(null,t,n)}))}},{key:"close",value:function(t,n){var r=this;if(1===arguments.length){if("function"!=typeof t)return void C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),n);n=t,t=null}else if("string"!=typeof t||"function"!=typeof n)return void C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),n);var e="".concat(C.apiHost,"/tickets/").concat(this.id,"/close"),o=x.postParam;t&&(o.closeComment=t),h.create({headers:x.header}).patch(e,o).then(function(t){t.data.channelUrl?(r.fetchFromJSON(t.data),si([r.channelUrl],function(t,e){t=C.getParamsFromCallback(t,e).result;0<t.length&&(r.channel=t[0]),j[r.channelUrl]=r,_.write("[REQ] ticket close:",r),C.callback(r,null,n)})):C.callback(r,null,n)}).catch(function(t){return C.callback(null,t,n)})}},{key:"selectQuestion",value:function(t,e,n){var r,o,i=this;"number"!=typeof t||"string"!=typeof e?C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),n):(r="".concat(C.apiHost,"/tickets/").concat(this.id,"/select_question"),(o=x.postParam).faqFileId=t,o.question=e,h.create({headers:x.header}).post(r,o).then(function(t){_.write("[REQ] ticket select option:",i),C.callback(t.data,null,n)}).catch(function(t){return C.callback(null,t,n)}))}},{key:"setPriority",value:function(t,e){var n,r,o=this;Object.keys(d.Priority).map(function(t){return d.Priority[t]}).indexOf(t)<0?C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),e):(n="".concat(C.apiHost,"/tickets/").concat(this.id,"/"),(r=x.postParam).priority=t,h.create({headers:x.header}).patch(n,r).then(function(t){o.fetchFromJSON(t.data),C.callback(o,null,e)}).catch(function(t){C.callback(null,t,e)}))}},{key:"setRelatedChannelUrls",value:function(t,e){var n,r,o=this;!Array.isArray(t)||t.some(function(t){return"string"!=typeof t})?C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),e):(n="".concat(C.apiHost,"/tickets/").concat(this.id,"/"),(r=x.postParam).relatedChannelUrls=t.join(","),h.create({headers:x.header}).patch(n,r).then(function(t){o.fetchFromJSON(t.data),C.callback(o,null,e)}).catch(function(t){C.callback(null,t,e)}))}},{key:"setCustomFields",value:function(t,e){var n=this;if("object"!==F(t)||null===t||Array.isArray(t))C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),e);else{var r,o={};for(r in t)o[r]="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);var i="".concat(C.apiHost,"/tickets/").concat(this.id,"/custom_fields/"),a=x.postParam;a.customFields=JSON.stringify(o),h.create({headers:x.header}).patch(i,a).then(function(t){n.fetchFromJSON(t.data),C.callback(n,null,e)}).catch(function(t){C.callback(null,t,e)})}}}],[{key:"Status",get:function(){return{INITIALIZED:"INITIALIZED",PROACTIVE:"PROACTIVE",UNASSIGNED:"UNASSIGNED",ASSIGNED:"ASSIGNED",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"isStatus",value:function(t){for(var e in d.Status)if(d.Status[e]===t)return!0;return!1}},{key:"Priority",get:function(){return{URGENT:"URGENT",HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"}}},{key:"isPriority",value:function(t){for(var e in d.Priority)if(d.Priority[e]===t)return!0;return!1}},{key:"isDeskCustomType",value:function(t){return t===ha}},{key:"defaultLimit",get:function(){return 10}},{key:"clearCache",value:function(t){t?(delete j[t],_.write("[SYS] cached ticket for ".concat(t," cleared"))):(j={},_.write("[SYS] all cached ticket cleared"))}},{key:"create",value:function(t,e,n,r,o,i,a,c){var u=C.sendBird;if(u)if("function"==typeof n&&(c=n,a=i=o=r=n=null),"function"==typeof r&&(c=r,a=i=o=r=null),"function"==typeof o&&(c=o,a=i=o=null),"function"==typeof i&&(c=i,a=i=null),"function"==typeof a&&(c=a,a=null),"string"!=typeof t||"string"!=typeof e||n&&"string"!=typeof n||r&&"object"!==F(r)||o&&!d.isPriority(o)||i&&(!Array.isArray(i)||i.some(function(t){return"string"!=typeof t}))||Array.isArray(r)||a&&"string"!=typeof a)C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),c);else{var u=u.getInstance(),s="".concat(C.apiHost,"/tickets/"),l=x.postParam;if(l.channelName=t,l.channelType="SENDBIRD_JAVASCRIPT",n&&(l.groupKey=n),r){var f,p={};for(f in r)p[f]="string"==typeof r[f]?r[f]:JSON.stringify(r[f]);l.customFields=JSON.stringify(p)}o&&(l.priority=o),i&&(l.relatedChannelUrls=i.join(",")),a&&(l.botKey=a),l.info=JSON.stringify({ticket:{subject:t,requester:{name:e,email:u.getCurrentUserId()}}}),h.create({headers:x.header}).post(s,l).then(function(t){var n=new d(t.data);si([n.channelUrl],function(t,e){t=C.getParamsFromCallback(t,e).result;0<t.length&&(n.channel=t[0]),j[n.channelUrl]=n,_.write("[REQ] ticket create:",n),C.callback(n,null,c)})}).catch(function(t){return C.callback(null,t,c)})}else C.callback(null,P.create(P.Type.ERROR_SENDBIRD_SDK_MISSING),c)}},{key:"getOpenCount",value:function(e){var t="".concat(C.apiHost,"/tickets/count/?").concat(x.getParam);h.create({headers:x.header}).get(t).then(function(t){return C.callback(t.data,null,e)}).catch(function(t){return C.callback(null,t,e)})}},{key:"getByChannelUrl",value:function(r,t,e){var n=t,o=e;null==e&&(n=!1,o=t),j[r]&&n?C.callback(j[r],null,o):(e="".concat(C.apiHost,"/tickets/?").concat(x.getParam,"&limit=10&channelUrl=").concat(r),h.create({headers:x.header}).get(e).then(function(t){var n=null;(n=t&&t.data&&0<t.data.results.length?new d(t.data.results[0]):n)?si([r],function(t,e){t=C.getParamsFromCallback(t,e).result;0<t.length&&(n.channel=t[0]),j[r]=n,_.write("[REQ] get ticket for channel ".concat(r,":"),n),C.callback(n,null,o)}):C.callback(null,P.Type.ERROR_DATA_NOT_FOUND,o)}).catch(function(t){return C.callback(null,t,o)}))}},{key:"getOpenedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),li({offset:t,customFieldFilter:e,status:this.Status.OPEN},n)}},{key:"getAllTickets",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),li({offset:t,customFieldFilter:e,status:"all"},n)}},{key:"getClosedList",value:function(t,e,n){"function"==typeof e&&(n=e,e=null),li({offset:t,customFieldFilter:e,status:this.Status.CLOSED},n)}},{key:"getUrlPreview",value:function(t,e){var n="".concat(C.apiHost,"/tickets/url_preview/"),r=x.postParam;r.url=t,h.create({headers:x.header}).post(n,r).then(function(t){return C.callback(t.data,null,e)}).catch(function(t){return C.callback(null,t,e)})}},{key:"confirmEndOfChat",value:function(r,o,i){"string"==typeof o&&-1<["yes","no"].indexOf(o)?d.getByChannelUrl(r.channelUrl,function(t,e){var n=C.getParamsFromCallback(t,e).result,t="".concat(C.apiHost,"/tickets/").concat(n.id,"/edit_message/"),e=x.postParam;e.messageId=r.messageId,e.messageData=JSON.stringify({type:pa.DataType.TICKET_INQUIRE_CLOSURE,body:{state:"yes"===o?pa.ClosureState.CONFIRMED:pa.ClosureState.DECLINED,ticketId:n.id}}),h.create({headers:x.header}).patch(t,e).then(function(t){_.write("[REQ] confirmed end of chat:",n),C.callback(t.data,null,i)}).catch(function(t){return C.callback(null,t,i)})}):C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER))}},{key:"submitFeedback",value:function(r,o){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",a=3<arguments.length?arguments[3]:void 0;r&&0<r.messageId&&r.channelUrl&&"number"==typeof o&&1<=o&&o<=5&&"string"==typeof i?d.getByChannelUrl(r.channelUrl,function(t,e){var n=C.getParamsFromCallback(t,e).result,t="".concat(C.apiHost,"/tickets/").concat(n.id,"/edit_message/"),e=x.postParam;e.messageId=r.messageId,e.messageData=JSON.stringify({type:pa.DataType.TICKET_FEEDBACK,body:{state:pa.FeedbackState.CONFIRMED,customerSatisfactionScore:o,customerSatisfactionComment:i,ticketId:n.id}}),h.create({headers:x.header}).patch(t,e).then(function(t){_.write("[REQ] customer feedback:",n),C.callback(t.data,null,a)}).catch(function(t){return C.callback(null,t,a)})}):C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER))}}]),d}(),ga=!1;return function(){function t(){i(this,t)}return n(t,null,[{key:"version",get:function(){return C.sdkVersion}},{key:"Error",get:function(){return P}},{key:"Agent",get:function(){return oa}},{key:"Ticket",get:function(){return ya}},{key:"Message",get:function(){return pa}},{key:"RelatedChannel",get:function(){return da}},{key:"UrlRegExp",get:function(){return pa.UrlRegExp}},{key:"init",value:function(t){try{t||(window&&window.SendBird&&(t=window.SendBird),global&&global.SendBird&&(t=global.SendBird)),t&&t.version?(C.sendBird=t,C.isSendBirdSdkCompatible(t.version)?ga=!0:P.throw(P.Type.ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED)):P.throw(P.Type.ERROR_SENDBIRD_SDK_MISSING)}catch(t){P.throw(P.Type.ERROR_SENDBIRD_SDK_MISSING)}}},{key:"authenticate",value:function(t,e,n){ga?x.connect(t,e,n):P.throw(P.Type.ERROR_SENDBIRD_DESK_INIT_MISSING)}},{key:"isDeskChannel",value:function(t){return ya.isDeskCustomType(t.customType)}},{key:"setApiHost",value:function(t){C.apiHost=t}},{key:"setDebugMode",value:function(){C.setDebugMode()}},{key:"setCustomerCustomFields",value:function(t,o){if("object"!==F(t)||null===t||Array.isArray(t))C.callback(null,P.create(P.Type.ERROR_INVALID_PARAMETER),o);else{var e,n={};for(e in t)n[e]="string"==typeof t[e]?t[e]:JSON.stringify(t[e]);var r="".concat(C.apiHost,"/customers/custom_fields/"),i=x.postParam;i.customFields=JSON.stringify(n),h.create({headers:x.header}).patch(r,i).then(function(t){var e,n={};for(e in t.data.customFields){var r=t.data.customFields[e];n[r.key]=r.value}C.callback(n,null,o)}).catch(function(t){C.callback(null,t,o)})}}}]),t}()});