/**
 * Copyright(c) 2016 SendBird, Inc.
 * SendBird Desk JavaScript SDK v1.0.23
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SendBirdDesk=e()}(this,function(){"use strict";function U(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}}var M=Object.prototype.toString;function B(t){return"[object Array]"===M.call(t)}function x(t){return void 0===t}function L(t){return null!==t&&"object"==typeof t}function G(t){return"[object Function]"===M.call(t)}function K(t,e){if(null!=t)if(B(t="object"!=typeof t?[t]:t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var c={isArray:B,isArrayBuffer:function(t){return"[object ArrayBuffer]"===M.call(t)},isBuffer:function(t){return null!==t&&!x(t)&&null!==t.constructor&&!x(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:L,isUndefined:x,isDate:function(t){return"[object Date]"===M.call(t)},isFile:function(t){return"[object File]"===M.call(t)},isBlob:function(t){return"[object Blob]"===M.call(t)},isFunction:G,isStream:function(t){return L(t)&&G(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:K,merge:function r(){var n={};function t(t,e){n[e]="object"==typeof n[e]&&"object"==typeof t?r(n[e],t):t}for(var e=0,o=arguments.length;e<o;e++)K(arguments[e],t);return n},deepMerge:function r(){var n={};function t(t,e){n[e]="object"==typeof n[e]&&"object"==typeof t?r(n[e],t):"object"==typeof t?r({},t):t}for(var e=0,o=arguments.length;e<o;e++)K(arguments[e],t);return n},extend:function(r,t,n){return K(t,function(t,e){r[e]=n&&"function"==typeof t?U(t,n):t}),r},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function z(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var H=function(t,e,r){var n;return e&&(r=r?r(e):c.isURLSearchParams(e)?e.toString():(n=[],c.forEach(e,function(t,e){null!=t&&(c.isArray(t)?e+="[]":t=[t],c.forEach(t,function(t){c.isDate(t)?t=t.toISOString():c.isObject(t)&&(t=JSON.stringify(t)),n.push(z(e)+"="+z(t))}))}),n.join("&")))&&(-1!==(e=t.indexOf("#"))&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r),t};function $(){this.handlers=[]}$.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},$.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},$.prototype.forEach=function(e){c.forEach(this.handlers,function(t){null!==t&&e(t)})};function J(e,r,t){return c.forEach(t,function(t){e=t(e,r)}),e}function q(t){return!(!t||!t.__CANCEL__)}function V(r,n){c.forEach(r,function(t,e){e!==n&&e.toUpperCase()===n.toUpperCase()&&(r[n]=t,delete r[e])})}var W,Q,e,X=$,Y=function(t,e,r,n,o){var t=new Error(t);return r=r,n=n,o=o,(t=t).config=e,r&&(t.code=r),t.request=n,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Z=function(t,e,r){var n=r.config.validateStatus;!n||n(r.status)?t(r):e(Y("Request failed with status code "+r.status,r.config,null,r.request,r))},tt=function(t,e){var r;return t&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)?(t=t,(r=e)?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t):e},et=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],rt=function(t){var e,r,n={};return t&&c.forEach(t.split("\n"),function(t){r=t.indexOf(":"),e=c.trim(t.substr(0,r)).toLowerCase(),r=c.trim(t.substr(r+1)),!e||n[e]&&0<=et.indexOf(e)||(n[e]="set-cookie"===e?(n[e]||[]).concat([r]):n[e]?n[e]+", "+r:r)}),n},nt=c.isStandardBrowserEnv()?(Q=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),W=ot(window.location.href),function(t){t=c.isString(t)?ot(t):t;return t.protocol===W.protocol&&t.host===W.host}):function(){return!0};function ot(t){return Q&&(e.setAttribute("href",t),t=e.href),e.setAttribute("href",t),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}function at(s){return new Promise(function(e,r){var t,n=s.data,o=s.headers,a=(c.isFormData(n)&&delete o["Content-Type"],new XMLHttpRequest),i=(s.auth&&(i=s.auth.username||"",t=s.auth.password||"",o.Authorization="Basic "+btoa(i+":"+t)),tt(s.baseURL,s.url));if(a.open(s.method.toUpperCase(),H(i,s.params,s.paramsSerializer),!0),a.timeout=s.timeout,a.onreadystatechange=function(){var t;a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))&&(t="getAllResponseHeaders"in a?rt(a.getAllResponseHeaders()):null,t={data:s.responseType&&"text"!==s.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:t,config:s,request:a},Z(e,r,t),a=null)},a.onabort=function(){a&&(r(Y("Request aborted",s,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(Y("Network Error",s,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),r(Y(t,s,"ECONNABORTED",a)),a=null},c.isStandardBrowserEnv()&&(t=it,i=(s.withCredentials||nt(i))&&s.xsrfCookieName?t.read(s.xsrfCookieName):void 0)&&(o[s.xsrfHeaderName]=i),"setRequestHeader"in a&&c.forEach(o,function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete o[e]:a.setRequestHeader(e,t)}),c.isUndefined(s.withCredentials)||(a.withCredentials=!!s.withCredentials),s.responseType)try{a.responseType=s.responseType}catch(t){if("json"!==s.responseType)throw t}"function"==typeof s.onDownloadProgress&&a.addEventListener("progress",s.onDownloadProgress),"function"==typeof s.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(t){a&&(a.abort(),r(t),a=null)}),void 0===n&&(n=null),a.send(n)})}var it=c.isStandardBrowserEnv()?{write:function(t,e,r,n,o,a){var i=[];i.push(t+"="+encodeURIComponent(e)),c.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),c.isString(n)&&i.push("path="+n),c.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(t){t=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},st={"Content-Type":"application/x-www-form-urlencoded"};function ct(t,e){!c.isUndefined(t)&&c.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var ut={adapter:t="undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?at:t,transformRequest:[function(t,e){return V(e,"Accept"),V(e,"Content-Type"),c.isFormData(t)||c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t)?t:c.isArrayBufferView(t)?t.buffer:c.isURLSearchParams(t)?(ct(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):c.isObject(t)?(ct(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}},lt=(c.forEach(["delete","get","head"],function(t){ut.headers[t]={}}),c.forEach(["post","put","patch"],function(t){ut.headers[t]=c.merge(st)}),ut);function ft(t){t.cancelToken&&t.cancelToken.throwIfRequested()}function dt(e){return ft(e),e.headers=e.headers||{},e.data=J(e.data,e.headers,e.transformRequest),e.headers=c.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),c.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||lt.adapter)(e).then(function(t){return ft(e),t.data=J(t.data,t.headers,e.transformResponse),t},function(t){return q(t)||(ft(e),t&&t.response&&(t.response.data=J(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}function pt(e,r){r=r||{};var n={},t=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],i=(c.forEach(t,function(t){void 0!==r[t]&&(n[t]=r[t])}),c.forEach(o,function(t){c.isObject(r[t])?n[t]=c.deepMerge(e[t],r[t]):void 0!==r[t]?n[t]=r[t]:c.isObject(e[t])?n[t]=c.deepMerge(e[t]):void 0!==e[t]&&(n[t]=e[t])}),c.forEach(a,function(t){void 0!==r[t]?n[t]=r[t]:void 0!==e[t]&&(n[t]=e[t])}),t.concat(o).concat(a)),t=Object.keys(r).filter(function(t){return-1===i.indexOf(t)});return c.forEach(t,function(t){void 0!==r[t]?n[t]=r[t]:void 0!==e[t]&&(n[t]=e[t])}),n}function ht(t){this.defaults=t,this.interceptors={request:new X,response:new X}}ht.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=pt(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[dt,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},ht.prototype.getUri=function(t){return t=pt(this.defaults,t),H(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},c.forEach(["delete","get","head","options"],function(r){ht.prototype[r]=function(t,e){return this.request(c.merge(e||{},{method:r,url:t}))}}),c.forEach(["post","put","patch"],function(n){ht.prototype[n]=function(t,e,r){return this.request(c.merge(r||{},{method:n,url:t,data:e}))}});var yt=ht;function mt(t){this.message=t}mt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},mt.prototype.__CANCEL__=!0;var gt=mt;function bt(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");this.promise=new Promise(function(t){e=t});var e,r=this;t(function(t){r.reason||(r.reason=new gt(t),e(r.reason))})}bt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},bt.source=function(){var e;return{token:new bt(function(t){e=t}),cancel:e}};var t=bt;function Et(t){var t=new yt(t),e=U(yt.prototype.request,t);return c.extend(e,yt.prototype,t),c.extend(e,t),e}function r(t){try{return!!t()}catch(t){return!0}}function n(t){return It(Ot(t),8,-1)}function St(t){return kt(Nt(t))}var o=Et(lt),t=(o.Axios=yt,o.create=function(t){return Et(pt(o.defaults,t))},o.Cancel=gt,o.CancelToken=t,o.isCancel=q,o.all=function(t){return Promise.all(t)},o.spread=function(e){return function(t){return e.apply(null,t)}},o),p=(t.default=o,t),vt=!r(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),t=Function.prototype,Rt=t.call,t=vt&&t.bind.bind(Rt,Rt),d=vt?t:function(t){return function(){return Rt.apply(t,arguments)}},Ot=d({}.toString),It=d("".slice),wt=Object,At=d("".split),kt=r(function(){return!wt("z").propertyIsEnumerable(0)})?function(t){return"String"==n(t)?At(t,""):wt(t)}:wt,Tt=function(t){return null==t},Dt=TypeError,Nt=function(t){if(Tt(t))throw Dt("Can't call method on "+t);return t},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _t(t,e){return t(e={exports:{}},e.exports),e.exports}function Ct(t){return t&&t.Math==Math&&t}function Pt(t){return re(Nt(t))}function jt(t){return"Symbol("+(void 0===t?"":t)+")_"+ie(++oe+ae,36)}function a(t){return h(le,t)||(le[t]=ce&&h(ue,t)?ue[t]:fe("Symbol."+t)),le[t]}function Ft(t,e){return arguments.length<2?(r=u[t],g(r)?r:void 0):u[t]&&u[t][e];var r}function Ut(t){return t=function(t,e){if(!m(t)||Oe(t))return t;var r=Te(t,Ce);if(r){if(r=v(r,t,e=void 0===e?"default":e),!m(r)||Oe(r))return r;throw _e("Can't convert object to primitive value")}return Ne(t,e=void 0===e?"number":e)}(t,"string"),Oe(t)?t:t+""}function Mt(t,e){return(t=Ke(t))<0?ze(t+e,0):He(t,e)}function Bt(t){return Je(t.length)}function xt(s){return function(t,e,r){var n,o=St(t),a=Bt(o),i=Mt(r,a);if(s&&e!=e){for(;i<a;)if((n=o[i++])!=n)return!0}else for(;i<a;i++)if((s||i in o)&&o[i]===e)return s||i||0;return!s&&-1}}function Lt(t,e){var r,n=St(t),o=0,a=[];for(r in n)!h(qe,r)&&h(n,r)&&We(a,r);for(;e.length>o;)!h(n,r=e[o++])||~Ve(a,r)||We(a,r);return a}function Gt(t){return tr[t]||(tr[t]=jt(t))}function Kt(){}function zt(t){t.write(or("")),t.close();var e=t.parentWindow.Object;return t=null,e}function Ht(t){cr[sr][t]=!0}function $t(t,e){return(t=Cr[_r(t)])==jr||t!=Pr&&(g(e)?r(e):!!e)}function Jt(t,e){var r,n,o,a=t.target,i=t.global,s=t.stat,c=i?u:s?u[a]||ee(a,{}):(u[a]||{}).prototype;if(c)for(r in e){if(n=e[r],o=t.dontCallGetSet?(o=Ur(c,r))&&o.value:c[r],!Fr(i?r:a+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof n==typeof o)continue;Dr(n,o)}(t.sham||o&&o.sham)&&fr(n,"sham",!0),I(c,r,n,t)}}function qt(){return this}function Vt(t,e){return{value:t,done:e}}var Wt,Qt,Xt,i,Yt,Zt,u=Ct("object"==typeof globalThis&&globalThis)||Ct("object"==typeof window&&window)||Ct("object"==typeof self&&self)||Ct("object"==typeof t&&t)||function(){return this}()||Function("return this")(),te=Object.defineProperty,ee=function(e,r){try{te(u,e,{value:r,configurable:!0,writable:!0})}catch(t){u[e]=r}return r},t="__core-js_shared__",s=u[t]||ee(t,{}),t=_t(function(t){(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),re=Object,ne=d({}.hasOwnProperty),h=Object.hasOwn||function(t,e){return ne(Pt(t),e)},oe=0,ae=Math.random(),ie=d(1..toString),l="undefined"!=typeof navigator&&String(navigator.userAgent)||"",f=u.process,y=u.Deno,f=f&&f.versions||y&&y.version,y=f&&f.v8,se=O=!(O=y?0<(S=y.split("."))[0]&&S[0]<4?1:+(S[0]+S[1]):O)&&l&&(!(S=l.match(/Edge\/(\d+)/))||74<=S[1])&&(S=l.match(/Chrome\/(\d+)/))?+S[1]:O,ce=!!Object.getOwnPropertySymbols&&!r(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&se&&se<41}),f=ce&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ue=u.Symbol,le=t("wks"),fe=f?ue.for||ue:ue&&ue.withoutSetter||jt,y="object"==typeof document&&document.all,l={all:y,IS_HTMLDDA:void 0===y&&void 0!==y},de=l.all,g=l.IS_HTMLDDA?function(t){return"function"==typeof t||t===de}:function(t){return"function"==typeof t},pe=l.all,m=l.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:g(t)||t===pe}:function(t){return"object"==typeof t?null!==t:g(t)},he=String,ye=TypeError,b=function(t){if(m(t))return t;throw ye(he(t)+" is not an object")},E=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),S=E&&r(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),me=u.document,ge=m(me)&&m(me.createElement),be=function(t){return ge?me.createElement(t):{}},Ee=!E&&!r(function(){return 7!=Object.defineProperty(be("div"),"a",{get:function(){return 7}}).a}),Se=Function.prototype.call,v=vt?Se.bind(Se):function(){return Se.apply(Se,arguments)},ve=d({}.isPrototypeOf),Re=Object,Oe=f?function(t){return"symbol"==typeof t}:function(t){var e=Ft("Symbol");return g(e)&&ve(e.prototype,Re(t))},Ie=String,we=function(t){try{return Ie(t)}catch(t){return"Object"}},Ae=TypeError,ke=function(t){if(g(t))return t;throw Ae(we(t)+" is not a function")},Te=function(t,e){t=t[e];return Tt(t)?void 0:ke(t)},De=TypeError,Ne=function(t,e){var r,n;if("string"===e&&g(r=t.toString)&&!m(n=v(r,t)))return n;if(g(r=t.valueOf)&&!m(n=v(r,t)))return n;if("string"!==e&&g(r=t.toString)&&!m(n=v(r,t)))return n;throw De("Can't convert object to primitive value")},_e=TypeError,Ce=a("toPrimitive"),Pe=TypeError,je=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor,Ue="enumerable",Me="configurable",Be="writable",R={f:E?S?function(t,e,r){var n;return b(t),e=Ut(e),b(r),"function"==typeof t&&"prototype"===e&&"value"in r&&Be in r&&!r[Be]&&(n=Fe(t,e))&&n[Be]&&(t[e]=r.value,r={configurable:(Me in r?r:n)[Me],enumerable:(Ue in r?r:n)[Ue],writable:!1}),je(t,e,r)}:je:function(t,e,r){if(b(t),e=Ut(e),b(r),Ee)try{return je(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Pe("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},xe=Math.ceil,Le=Math.floor,Ge=Math.trunc||function(t){t=+t;return(0<t?Le:xe)(t)},Ke=function(t){t=+t;return t!=t||0==t?0:Ge(t)},ze=Math.max,He=Math.min,$e=Math.min,Je=function(t){return 0<t?$e(Ke(t),9007199254740991):0},O={includes:xt(!0),indexOf:xt(!1)},qe={},Ve=O.indexOf,We=d([].push),Qe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xe=Object.keys||function(t){return Lt(t,Qe)},Ye={f:E&&!S?Object.defineProperties:function(t,e){b(t);for(var r,n=St(e),o=Xe(e),a=o.length,i=0;i<a;)R.f(t,r=o[i++],n[r]);return t}},Ze=Ft("document","documentElement"),tr=t("keys"),er="prototype",rr="script",nr=Gt("IE_PROTO"),or=function(t){return"<"+rr+">"+t+"</"+rr+">"},ar=function(){try{Wt=new ActiveXObject("htmlfile")}catch(t){}ar="undefined"==typeof document||document.domain&&Wt?zt(Wt):(t=be("iframe"),e="java"+rr+":",t.style.display="none",Ze.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(or("document.F=Object")),e.close(),e.F);for(var t,e,r=Qe.length;r--;)delete ar[er][Qe[r]];return ar()},ir=(qe[nr]=!0,Object.create||function(t,e){var r;return null!==t?(Kt[er]=b(t),r=new Kt,Kt[er]=null,r[nr]=t):r=ar(),void 0===e?r:Ye.f(r,e)}),y=R.f,sr=a("unscopables"),cr=Array.prototype,ur=(null==cr[sr]&&y(cr,sr,{configurable:!0,value:ir(null)}),{}),l=u.WeakMap,f=g(l)&&/native code/.test(String(l)),lr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},fr=E?function(t,e,r){return R.f(t,e,lr(1,r))}:function(t,e,r){return t[e]=r,t},dr="Object already initialized",pr=u.TypeError,O=u.WeakMap,hr=f||s.state?((i=s.state||(s.state=new O)).get=i.get,i.has=i.has,i.set=i.set,Qt=function(t,e){if(i.has(t))throw pr(dr);return e.facade=t,i.set(t,e),e},Xt=function(t){return i.get(t)||{}},function(t){return i.has(t)}):(Yt=Gt("state"),qe[Yt]=!0,Qt=function(t,e){if(h(t,Yt))throw pr(dr);return e.facade=t,fr(t,Yt,e),e},Xt=function(t){return h(t,Yt)?t[Yt]:{}},function(t){return h(t,Yt)}),yr={set:Qt,get:Xt,has:hr,enforce:function(t){return hr(t)?Xt(t):Qt(t,{})},getterFor:function(e){return function(t){if(m(t)&&(t=Xt(t)).type===e)return t;throw pr("Incompatible receiver, "+e+" required")}}},S={}.propertyIsEnumerable,mr=Object.getOwnPropertyDescriptor,gr={f:mr&&!S.call({1:2},1)?function(t){t=mr(this,t);return!!t&&t.enumerable}:S},br=Object.getOwnPropertyDescriptor,Er={f:E?br:function(t,e){if(t=St(t),e=Ut(e),Ee)try{return br(t,e)}catch(t){}if(h(t,e))return lr(!v(gr.f,t,e),t[e])}},t=Function.prototype,y=E&&Object.getOwnPropertyDescriptor,l=h(t,"name"),Sr={EXISTS:l,PROPER:l&&"something"===function(){}.name,CONFIGURABLE:l&&(!E||y(t,"name").configurable)},vr=d(Function.toString),Rr=(g(s.inspectSource)||(s.inspectSource=function(t){return vr(t)}),s.inspectSource),Or=_t(function(t){var n=Sr.CONFIGURABLE,o=yr.enforce,e=yr.get,a=String,i=Object.defineProperty,s=d("".slice),c=d("".replace),u=d([].join),l=E&&!r(function(){return 8!==i(function(){},"length",{value:8}).length}),f=String(String).split("String"),t=t.exports=function(t,e,r){"Symbol("===s(a(e),0,7)&&(e="["+c(a(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!h(t,"name")||n&&t.name!==e)&&(E?i(t,"name",{value:e,configurable:!0}):t.name=e),l&&r&&h(r,"arity")&&t.length!==r.arity&&i(t,"length",{value:r.arity});try{r&&h(r,"constructor")&&r.constructor?E&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}r=o(t);return h(r,"source")||(r.source=u(f,"string"==typeof e?e:"")),t};Function.prototype.toString=t(function(){return g(this)&&e(this).source||Rr(this)},"toString")}),I=function(t,e,r,n){var o=(n=n||{}).enumerable,a=void 0!==n.name?n.name:e;if(g(r)&&Or(r,a,n),n.global)o?t[e]=r:ee(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:R.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},Ir=Qe.concat("length","prototype"),wr={f:Object.getOwnPropertyNames||function(t){return Lt(t,Ir)}},Ar={f:Object.getOwnPropertySymbols},kr=d([].concat),Tr=Ft("Reflect","ownKeys")||function(t){var e=wr.f(b(t)),r=Ar.f;return r?kr(e,r(t)):e},Dr=function(t,e,r){for(var n=Tr(e),o=R.f,a=Er.f,i=0;i<n.length;i++){var s=n[i];h(t,s)||r&&h(r,s)||o(t,s,a(e,s))}},Nr=/#|\.prototype\./,_r=$t.normalize=function(t){return String(t).replace(Nr,".").toLowerCase()},Cr=$t.data={},Pr=$t.NATIVE="N",jr=$t.POLYFILL="P",Fr=$t,Ur=Er.f,O=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Mr=Gt("IE_PROTO"),Br=Object,xr=Br.prototype,Lr=O?Br.getPrototypeOf:function(t){var e,t=Pt(t);return h(t,Mr)?t[Mr]:(e=t.constructor,g(e)&&t instanceof e?e.prototype:t instanceof Br?xr:null)},Gr=a("iterator"),S=!1,t=([].keys&&("next"in(l=[].keys())?(y=Lr(Lr(l)))!==Object.prototype&&(Zt=y):S=!0),!m(Zt)||r(function(){var t={};return Zt[Gr].call(t)!==t})),O=(g((Zt=t?{}:Zt)[Gr])||I(Zt,Gr,function(){return this}),{IteratorPrototype:Zt,BUGGY_SAFARI_ITERATORS:S}),Kr=R.f,zr=a("toStringTag"),Hr=function(t,e,r){(t=t&&!r?t.prototype:t)&&!h(t,zr)&&Kr(t,zr,{configurable:!0,value:e})},$r=O.IteratorPrototype,Jr=function(){return this},qr=String,Vr=TypeError,Wr=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,t={};try{(r=function(t,e,r){try{return d(ke(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}(Object.prototype,"__proto__","set"))(t,[]),n=t instanceof Array}catch(t){}return function(t,e){return b(t),function(t){if("object"==typeof t||g(t))return;throw Vr("Can't set "+qr(t)+" as a prototype")}(e),n?r(t,e):t.__proto__=e,t}}():void 0),Qr=Sr.PROPER,Xr=Sr.CONFIGURABLE,Yr=O.IteratorPrototype,Zr=O.BUGGY_SAFARI_ITERATORS,tn=a("iterator"),en="values",rn="entries",l=R.f,nn="Array Iterator",on=yr.set,an=yr.getterFor(nn),y=(function(t,e,r,n,o,a,i){function s(t){if(t===o&&m)return m;if(!Zr&&t in h)return h[t];switch(t){case"keys":case en:case rn:return function(){return new r(this,t)}}return function(){return new r(this)}}var c,u,l=r,f=e,d=void 0,d=(f+=" Iterator",l.prototype=ir($r,{next:lr(+!d,n)}),Hr(l,f,!1),ur[f]=Jr,e+" Iterator"),p=!1,h=t.prototype,y=h[tn]||h["@@iterator"]||o&&h[o],m=!Zr&&y||s(o),n="Array"==e&&h.entries||y;if(n&&(l=Lr(n.call(new t)))!==Object.prototype&&l.next&&(Lr(l)!==Yr&&(Wr?Wr(l,Yr):g(l[tn])||I(l,tn,qt)),Hr(l,d,!0)),Qr&&o==en&&y&&y.name!==en&&(Xr?fr(h,"name",en):(p=!0,m=function(){return v(y,this)})),o)if(c={values:s(en),keys:a?m:s("keys"),entries:s(rn)},i)for(u in c)!Zr&&!p&&u in h||I(h,u,c[u]);else Jt({target:e,proto:!0,forced:Zr||p},c);h[tn]!==m&&I(h,tn,m,{name:o}),ur[e]=m}(Array,"Array",function(t,e){on(this,{type:nn,target:St(t),index:0,kind:e})},function(){var t=an(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Vt(void 0,!0)):Vt("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)},"values"),ur.Arguments=ur.Array);if(Ht("keys"),Ht("values"),Ht("entries"),E&&"values"!==y.name)try{l(y,"name",{value:"values"})}catch(t){}class w{constructor(){}static write(){A.isDebugMode&&console.log(...arguments)}static error(){A.isDebugMode&&console.error(...arguments)}}const sn=new WeakMap;let cn=null,un=null;class A{constructor(){}static get sendBird(){return cn}static set sendBird(t){cn=t}static get isDebugMode(){return sn.get(this)}static setDebugMode(){sn.set(this,!0)}static unsetDebugMode(){sn.set(this,!1)}static get apiHost(){var t;return un||(t=cn.getInstance(),un=`https://desk-api-${t.getApplicationId()}.sendbird.com/sapi`),un}static set apiHost(t){un=t}static get sdkVersion(){return"1.0.23"}static get minSendBirdVersion(){return"3.0.55"}static getParamsFromCallback(t,e){return{result:t,err:e,reversed:!1}}static callback(t,e,r){r&&((t=A.getParamsFromCallback(t,e)).err&&w.error(t.err),t.reversed?r(t.err,t.result):r(t.result,t.err))}static isSendBirdSdkCompatible(t){var e,r="3.0.55".split("."),n=t.split(".");if(r.length!==n.length)return!1;for(e in r){if(parseInt(r[e])<parseInt(n[e]))return!0;if(parseInt(r[e])>parseInt(n[e]))return!1}return!0}}const ln={ERROR_SENDBIRD_SDK_MISSING:{code:100,message:"SendBird SDK is missing."},ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED:{code:101,message:"This SendBird SDK version is not supported."},ERROR_SENDBIRD_DESK_INIT_MISSING:{code:102,message:"SendBird Desk SDK is not initialized. It should be done before authentication."},ERROR_SENDBIRD_SDK_MESSAGE_LIST_FAILED:{code:200,message:"Cannot load messages in SDK client."},ERROR_INVALID_PARAMETER:{code:403,message:"Invalid parameter."},ERROR_DATA_NOT_FOUND:{code:404,message:"Data not found."},ERROR_REQUEST_TIMEOUT:{code:409,message:"Request timed-out."},ERROR_REQUEST:{code:500,message:"Request failed."},ERROR_REQUEST_CANCELED:{code:501,message:"Request canceled."}};class k extends Error{constructor(t,e){super(t),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack,this.name="SendBirdDeskError",this.message=t,this.code=e}static get Type(){return ln}static create(t){return t?new k(t.message,t.code):new Error("SendBirdDeskError type missing.")}static throw(t){if(t)throw new k(t.message,t.code)}}function fn(t,e,r){for(var n in e)I(t,n,e[n],r)}function dn(t){if("Function"===n(t))return d(t)}function pn(t,e){return ke(t),void 0===e?t:vt?Cn(t,e):function(){return t.apply(e,arguments)}}function hn(t,e,r){var n,o;b(t);try{if(!(n=Te(t,"return"))){if("throw"===e)throw r;return}n=v(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;b(n)}function yn(t,e){this.stopped=t,this.result=e}function mn(t,e,r){function n(t){return a&&hn(a,"normal",t),new yn(!0,t)}function o(t){return d?(b(t),y?m(t[0],t[1],n):m(t[0],t[1])):y?m(t,n):m(t)}var a,i,s,c,u,l,f=r&&r.that,d=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_RECORD),h=!(!r||!r.IS_ITERATOR),y=!(!r||!r.INTERRUPTED),m=pn(e,f);if(p)a=t.iterator;else if(h)a=t;else{if(!(r=Un(t)))throw Bn(we(t)+" is not iterable");if(void 0!==(e=r)&&(ur.Array===e||jn[Pn]===e)){for(i=0,s=Bt(t);i<s;i++)if((c=o(t[i]))&&ve(xn,c))return;return}a=function(t,e){e=arguments.length<2?Un(t):e;if(ke(e))return b(v(e,t));throw Mn(we(t)+" is not iterable")}(t,r)}for(u=(p?t:a).next;!(l=v(u,a)).done;){try{c=o(l.value)}catch(t){hn(a,"throw",t)}if("object"==typeof c&&c&&ve(xn,c))return}}function gn(t,e){if(!ve(e,t))throw Ln("Incorrect invocation")}var t={},S=(t[a("toStringTag")]="z","[object z]"===String(t)),bn=a("toStringTag"),En=Object,Sn="Arguments"==n(function(){return arguments}()),vn=S?n:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=En(t),bn))?e:Sn?n(t):"Object"==(e=n(t))&&g(t.callee)?"Arguments":e},Rn=(S||I(Object.prototype,"toString",S?{}.toString:function(){return"[object "+vn(this)+"]"},{unsafe:!0}),!r(function(){return Object.isExtensible(Object.preventExtensions({}))})),On=Array,In=Math.max,wn=function(t,e,r){for(var n=Bt(t),o=Mt(e,n),a=Mt(void 0===r?n:r,n),i=On(In(a-o,0)),s=0;o<a;o++,s++){var c=i,u=s,l=t[o];(u=Ut(u))in c?R.f(c,u,lr(0,l)):c[u]=l}return i.length=s,i},An=wr.f,kn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Tn={f:function(t){if(!kn||"Window"!=n(t))return An(St(t));try{return An(t)}catch(t){return wn(kn)}}},Dn=r(function(){var t;"function"==typeof ArrayBuffer&&(t=new ArrayBuffer(8),Object.isExtensible(t))&&Object.defineProperty(t,"a",{value:8})}),Nn=Object.isExtensible,_n=r(function(){Nn(1)})||Dn?function(t){return!(!m(t)||Dn&&"ArrayBuffer"==n(t))&&(!Nn||Nn(t))}:Nn,O=_t(function(t){function r(t){e(t,i,{value:{objectID:"O"+o++,weakData:{}}})}var e=R.f,n=!1,i=jt("meta"),o=0,s=t.exports={enable:function(){s.enable=function(){},n=!0;var o=wr.f,a=d([].splice),t={};t[i]=1,o(t).length&&(wr.f=function(t){for(var e=o(t),r=0,n=e.length;r<n;r++)if(e[r]===i){a(e,r,1);break}return e},Jt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Tn.f}))},fastKey:function(t,e){if(!m(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!h(t,i)){if(!_n(t))return"F";if(!e)return"E";r(t)}return t[i].objectID},getWeakData:function(t,e){if(!h(t,i)){if(!_n(t))return!0;if(!e)return!1;r(t)}return t[i].weakData},onFreeze:function(t){return Rn&&n&&_n(t)&&!h(t,i)&&r(t),t}};qe[i]=!0}),Cn=(O.enable,O.fastKey,O.getWeakData,O.onFreeze,dn(dn.bind)),Pn=a("iterator"),jn=Array.prototype,Fn=a("iterator"),Un=function(t){if(!Tt(t))return Te(t,Fn)||Te(t,"@@iterator")||ur[vn(t)]},Mn=TypeError,Bn=TypeError,xn=yn.prototype,Ln=TypeError,Gn=a("iterator"),Kn=!1;try{var zn=0,Hn={next:function(){return{done:!!zn++}},return:function(){Kn=!0}};Hn[Gn]=function(){return this},Array.from(Hn,function(){throw 2})}catch(t){}function $n(){}function Jn(t){if(!g(t))return!1;try{return uo($n,co,t),!0}catch(t){return!1}}function qn(t){if(!g(t))return!1;switch(vn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return po||!!fo(lo,Rr(t))}catch(t){return!0}}function Vn(t,e){return new(go(t))(0===e?0:e)}function T(d){var p=1==d,h=2==d,y=3==d,m=4==d,g=6==d,b=7==d,E=5==d||g;return function(t,e,r,n){for(var o,a,i=Pt(t),s=kt(i),c=pn(e,r),u=Bt(s),l=0,e=n||Vn,f=p?e(t,u):h||b?e(t,0):void 0;l<u;l++)if((E||l in s)&&(a=c(o=s[l],l,i),d))if(p)f[l]=a;else if(a)switch(d){case 3:return!0;case 5:return o;case 6:return l;case 2:bo(f,o)}else switch(d){case 4:return!1;case 7:bo(f,o)}return g?-1:y||m?m:f}}function Wn(t){return t.frozen||(t.frozen=new Qn)}function Qn(){this.entries=[]}function Xn(t,e){return Ro(t.entries,function(t){return t[0]===e})}function Yn(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}var Zn,to,eo,ro,no,oo,D,ao,N,_,C,io,so=Array.isArray||function(t){return"Array"==n(t)},co=[],uo=Ft("Reflect","construct"),lo=/^\s*(?:class|function)\b/,fo=d(lo.exec),po=!lo.exec($n),ho=(qn.sham=!0,!uo||r(function(){var t;return Jn(Jn.call)||!Jn(Object)||!Jn(function(){t=!0})||t})?qn:Jn),yo=a("species"),mo=Array,go=function(t){var e;return void 0===(e=so(t)&&(e=t.constructor,ho(e)&&(e===mo||so(e.prototype))||m(e)&&null===(e=e[yo]))?void 0:e)?mo:e},bo=d([].push),l={forEach:T(0),map:T(1),filter:T(2),some:T(3),every:T(4),find:T(5),findIndex:T(6),filterReject:T(7)},Eo=O.getWeakData,So=yr.set,vo=yr.getterFor,Ro=l.find,Oo=l.findIndex,Io=d([].splice),wo=0,y=(Qn.prototype={get:function(t){t=Xn(this,t);if(t)return t[1]},has:function(t){return!!Xn(this,t)},set:function(t,e){var r=Xn(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(e){var t=Oo(this.entries,function(t){return t[0]===e});return~t&&Io(this.entries,t,1),!!~t}},{getConstructor:function(t,r,n,o){function a(t,e,r){var n=s(t),o=Eo(b(e),!0);return!0===o?Wn(n).set(e,r):o[n.id]=r,t}var t=t(function(t,e){gn(t,i),So(t,{type:r,id:wo++,frozen:void 0}),Tt(e)||mn(e,t[o],{that:t,AS_ENTRIES:n})}),i=t.prototype,s=vo(r);return fn(i,{delete:function(t){var e,r=s(this);return!!m(t)&&(!0===(e=Eo(t))?Wn(r).delete(t):e&&h(e,r.id)&&delete e[r.id])},has:function(t){var e,r=s(this);return!!m(t)&&(!0===(e=Eo(t))?Wn(r).has(t):e&&h(e,r.id))}}),fn(i,n?{get:function(t){var e,r=s(this);if(m(t))return!0===(e=Eo(t))?Wn(r).get(t):e?e[r.id]:void 0},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),t}}),Ao=yr.enforce,t=Object,ko=Array.isArray,To=t.isExtensible,Do=t.isFrozen,No=t.isSealed,_o=t.freeze,Co=t.seal,Po={},jo={},S=!u.ActiveXObject&&"ActiveXObject"in u,Fo=(Hn=Yn,l=y,oo=-1!==(t="WeakMap").indexOf("Map"),D=-1!==t.indexOf("Weak"),ao=oo?"set":"add",N=u[t],_=N&&N.prototype,io={},Fr(t,!g(C=N)||!(D||_.forEach&&!r(function(){(new N).entries().next()})))?(C=l.getConstructor(Hn,t,oo,ao),O.enable()):Fr(t,!0)&&(eo=(to=new C)[ao](D?{}:-0,1)!=to,ro=r(function(){to.has(1)}),Lo=function(t,e){if(!e&&!Kn)return!1;var r=!1;try{var n={};n[Gn]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}(function(t){new N(t)}),no=!D&&r(function(){for(var t=new N,e=5;e--;)t[ao](e,e);return!t.has(-0)}),Lo||(((C=Hn(function(t,e){gn(t,_);r=new N,t=t,n=C,Wr&&g(t=t.constructor)&&t!==n&&m(t=t.prototype)&&t!==n.prototype&&Wr(r,t);var r,n=r;return Tt(e)||mn(e,n[ao],{that:n,AS_ENTRIES:oo}),n})).prototype=_).constructor=C),(ro||no)&&(Uo("delete"),Uo("has"),oo)&&Uo("get"),(no||eo)&&Uo(ao),D)&&_.clear&&delete _.clear,Jt({global:!0,constructor:!0,forced:(io[t]=C)!=N},io),Hr(C,t),D||l.setStrong(C,t,oo),C);function Uo(t){var r=d(_[t]);I(_,t,"add"==t?function(t){return r(this,0===t?0:t),this}:"delete"==t?function(t){return!(D&&!m(t))&&r(this,0===t?0:t)}:"get"==t?function(t){return D&&!m(t)?void 0:r(this,0===t?0:t)}:"has"==t?function(t){return!(D&&!m(t))&&r(this,0===t?0:t)}:function(t,e){return r(this,0===t?0:t,e),this})}var Mo,Bo,xo,Lo=Fo.prototype,Go=d(Lo.set);f&&(S?(Zn=y.getConstructor(Yn,"WeakMap",!0),O.enable(),Mo=d(Lo.delete),Bo=d(Lo.has),xo=d(Lo.get),fn(Lo,{delete:function(t){var e;return m(t)&&!To(t)?((e=Ao(this)).frozen||(e.frozen=new Zn),Mo(this,t)||e.frozen.delete(t)):Mo(this,t)},has:function(t){var e;return m(t)&&!To(t)?((e=Ao(this)).frozen||(e.frozen=new Zn),Bo(this,t)||e.frozen.has(t)):Bo(this,t)},get:function(t){var e;return!m(t)||To(t)||((e=Ao(this)).frozen||(e.frozen=new Zn),Bo(this,t))?xo(this,t):e.frozen.get(t)},set:function(t,e){var r;return!m(t)||To(t)||((r=Ao(this)).frozen||(r.frozen=new Zn),Bo(this,t))?Go(this,t,e):r.frozen.set(t,e),this}})):Rn&&r(function(){var t=_o([]);return Go(new Fo,t,1),!Do(t)})&&fn(Lo,{set:function(t,e){var r;return ko(t)&&(Do(t)?r=Po:No(t)&&(r=jo)),Go(this,t,e),r==Po&&_o(t),r==jo&&Co(t),this}}));const Ko=new u.WeakMap;class P{constructor(){}static connect(t,e,r){"function"==typeof e&&(r=e,e="");var n,o=A.sendBird;o?(o=o.getInstance(),n=A.apiHost+"/customers/auth/",e={sendbirdAccessToken:e||"","content-type":"application/json"},o={sendbirdAppId:o.getApplicationId(),sendbirdId:t},p.create({headers:e}).post(n,o).then(t=>{Ko.set(this,{deskToken:t.data.token}),w.write("[REQ] connection established"),A.callback(t.data,null,r)}).catch(t=>{A.callback(null,t,r)})):A.callback(null,k.create(k.Type.ERROR_SENDBIRD_SDK_MISSING),r)}static get header(){return{sendbirdDeskToken:Ko.get(this).deskToken,"content-type":"application/json","user-agent":"desk-js@1.0.23"}}static get getParam(){var t=A.sendBird;return t?"sendbirdAppId="+t.getInstance().getApplicationId():""}static get postParam(){var t=A.sendBird;return t?{sendbirdAppId:t.getInstance().getApplicationId()}:{}}}class zo{constructor(t){this.fetchFromJSON(t)}fetchFromJSON(t){this.userId=t?t.user:0,this.name=t?t.displayName:"",this.profileUrl=t?t.photoThumbnailUrl:""}}class Ho{constructor(){}static get CustomType(){return{RICH_MESSAGE:"SENDBIRD_DESK_RICH_MESSAGE",ADMIN_MESSAGE:"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"}}static get DataType(){return{TICKET_INQUIRE_CLOSURE:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",TICKET_ASSIGN:"TICKET_ASSIGN",TICKET_TRANSFER:"TICKET_TRANSFER",TICKET_CLOSE:"TICKET_CLOSE",TICKET_FEEDBACK:"SENDBIRD_DESK_CUSTOMER_SATISFACTION",URL_PREVIEW:"SENDBIRD_DESK_URL_PREVIEW"}}static get ClosureState(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED"}}static get FeedbackState(){return{WAITING:"WAITING",CONFIRMED:"CONFIRMED"}}static get UrlRegExp(){return/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/gi}}class $o{constructor(t){this.fetchFromJSON(t)}fetchFromJSON(t){this.channelUrl=t?t.channel_url:"",this.name=t?t.name:""}}const Jo="SENDBIRD_DESK_CHANNEL_CUSTOM_TYPE";let j={};const qo=(t,e)=>{var r=A.sendBird;r?((r=r.getInstance().GroupChannel.createMyGroupChannelListQuery()).customTypesFilter=[Jo],r.channelUrlsFilter=t,r.includeEmpty=!0,r.next(e)):A.callback(null,k.create(k.Type.ERROR_SENDBIRD_SDK_MISSING),e)},Vo=(e,a)=>{let i=F.Status.OPEN;var t=(i=F.isStatus(e.status)?e.status:i)!==F.Status.CLOSED?"status=ASSIGNED&status=UNASSIGNED":"status=CLOSED";let r=A.apiHost+"/tickets/"+`?${P.getParam}&limit=${e.limit||F.defaultLimit}&offset=`+(e.offset||0)+`&${t}&order=`+(e.order||"-updated_at");e&&"all"===e.status&&(r=A.apiHost+"/tickets/"+`?${P.getParam}&limit=${e.limit||F.defaultLimit}&offset=`+(e.offset||0)+"&order="+(e.order||"-updated_at")),e.channelUrl&&(r+="&channelUrl="+e.channelUrl),e.group&&(r+="&group="+e.group),e.customFieldFilter&&"object"==typeof e.customFieldFilter&&(r+="&customFields="+encodeURIComponent(Object.keys(e.customFieldFilter).map(t=>t+":"+encodeURIComponent(e.customFieldFilter[t])).join(","))),p.create({headers:P.header}).get(r).then(t=>{if(t&&t.data){const o=[];var e,r=[];for(e in t.data.results){var n=new F(t.data.results[e]);j[n.channelUrl]=n,r.push(n.channelUrl),o.push(n)}qo(r,(t,e)=>{t=A.getParamsFromCallback(t,e);const r=t.result;t.err||o.forEach(t=>{for(var e in r){e=r[e];if(t.channelUrl===e.url){t.channel=e;break}}}),w.write(`[REQ] ${i} ticket list:`,o),A.callback(o,t.err,a)})}else A.callback([],null,a)}).catch(t=>A.callback(null,t,a))};class F{constructor(t){this.fetchFromJSON(t)}fetchFromJSON(t){if(this.id=t?t.id:0,this.title=t?t.channelName:"",this.status=t?t.status:"",this.info=t&&t.info?JSON.parse(t.info):null,this.priority=t?t.priority:F.Priority.MEDIUM,this.agent=t&&t.recentAssignment&&t.recentAssignment.agent?new zo(t.recentAssignment.agent):null,this.customer=t?t.customer:null,this.customFields={},this.group=t?t.group:0,this.relatedChannels=[],this.channel=this.channel,this.channelUrl=t?t.channelUrl:null,this.updatedAt=(t?new Date(t.updatedAt):new Date).getTime(),t&&t.customFields){var e=t.customFields;for(let t=0;t<e.length;t++){var r=e[t].key,n=e[t].value;this.customFields[r]=n}}if(t&&t.relatedChannels)try{var o=JSON.parse(t.relatedChannels);Array.isArray(o)&&(this.relatedChannels=o.map(t=>new $o(t)))}catch(t){}}refresh(r){var t=`${A.apiHost}/tickets/${this.id}/?`+P.getParam;p.create({headers:P.header}).get(t).then(t=>{this.fetchFromJSON(t.data),qo([this.channelUrl],(t,e)=>{t=A.getParamsFromCallback(t,e).result;0<t.length&&(this.channel=t[0]),j[this.channelUrl]=this,w.write("[REQ] ticket refresh:",this),A.callback(this,null,r)})}).catch(t=>A.callback(null,t,r))}reopen(r){var t=`${A.apiHost}/tickets/${this.id}/reopen`,e=P.postParam;p.create({headers:P.header}).patch(t,e).then(t=>{t&&t.data&&t.data.channelUrl?(this.fetchFromJSON(t.data),qo([this.channelUrl],(t,e)=>{t=A.getParamsFromCallback(t,e).result;0<t.length&&(this.channel=t[0]),j[this.channelUrl]=this,w.write("[REQ] ticket reopen:",this),A.callback(this,null,r)})):A.callback(this,null,r)}).catch(t=>A.callback(null,t,r))}cancel(t,r){var e,n;"function"==typeof t&&(r=t,t=null),t&&"string"!=typeof t?A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),r):(e=`${A.apiHost}/tickets/${this.id}/cancel`,n=P.postParam,t&&(n.groupKeyForTransfer=t),p.create({headers:P.header}).patch(e,n).then(t=>{t&&t.data&&t.data.channelUrl?(this.fetchFromJSON(t.data),qo([this.channelUrl],(t,e)=>{t=A.getParamsFromCallback(t,e).result;0<t.length&&(this.channel=t[0]),j[this.channelUrl]=this,w.write("[REQ] ticket cancel:",this),A.callback(this,null,r)})):A.callback(this,null,r)}).catch(t=>A.callback(null,t,r)))}close(t,r){if(1===arguments.length){if("function"!=typeof t)return void A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),r);r=t,t=null}else if("string"!=typeof t||"function"!=typeof r)return void A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),r);var e=`${A.apiHost}/tickets/${this.id}/close`,n=P.postParam;t&&(n.closeComment=t),p.create({headers:P.header}).patch(e,n).then(t=>{t.data.channelUrl?(this.fetchFromJSON(t.data),qo([this.channelUrl],(t,e)=>{t=A.getParamsFromCallback(t,e).result;0<t.length&&(this.channel=t[0]),j[this.channelUrl]=this,w.write("[REQ] ticket close:",this),A.callback(this,null,r)})):A.callback(this,null,r)}).catch(t=>A.callback(null,t,r))}selectQuestion(t,e,r){var n,o;"number"!=typeof t||"string"!=typeof e?A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),r):(n=`${A.apiHost}/tickets/${this.id}/select_question`,(o=P.postParam).faqFileId=t,o.question=e,p.create({headers:P.header}).post(n,o).then(t=>{w.write("[REQ] ticket select option:",this),A.callback(t.data,null,r)}).catch(t=>A.callback(null,t,r)))}setPriority(t,e){var r,n;Object.keys(F.Priority).map(t=>F.Priority[t]).indexOf(t)<0?A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),e):(r=`${A.apiHost}/tickets/${this.id}/`,(n=P.postParam).priority=t,p.create({headers:P.header}).patch(r,n).then(t=>{this.fetchFromJSON(t.data),A.callback(this,null,e)}).catch(t=>{A.callback(null,t,e)}))}setRelatedChannelUrls(t,e){var r,n;!Array.isArray(t)||t.some(t=>"string"!=typeof t)?A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),e):(r=`${A.apiHost}/tickets/${this.id}/`,(n=P.postParam).relatedChannelUrls=t.join(","),p.create({headers:P.header}).patch(r,n).then(t=>{this.fetchFromJSON(t.data),A.callback(this,null,e)}).catch(t=>{A.callback(null,t,e)}))}setCustomFields(t,e){if("object"!=typeof t||null===t||Array.isArray(t))A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),e);else{var r,n={};for(r in t)n[r]="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);var o=`${A.apiHost}/tickets/${this.id}/custom_fields/`,a=P.postParam;a.customFields=JSON.stringify(n),p.create({headers:P.header}).patch(o,a).then(t=>{this.fetchFromJSON(t.data),A.callback(this,null,e)}).catch(t=>{A.callback(null,t,e)})}}static get Status(){return{INITIALIZED:"INITIALIZED",PROACTIVE:"PROACTIVE",UNASSIGNED:"UNASSIGNED",ASSIGNED:"ASSIGNED",OPEN:"OPEN",CLOSED:"CLOSED"}}static isStatus(t){for(var e in F.Status)if(F.Status[e]===t)return!0;return!1}static get Priority(){return{URGENT:"URGENT",HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"}}static isPriority(t){for(var e in F.Priority)if(F.Priority[e]===t)return!0;return!1}static isDeskCustomType(t){return t===Jo}static get defaultLimit(){return 10}static clearCache(t){t?(delete j[t],w.write(`[SYS] cached ticket for ${t} cleared`)):(j={},w.write("[SYS] all cached ticket cleared"))}static create(t,e,r,n,o,a,i,s){var c=A.sendBird;if(c)if("function"==typeof r&&(s=r,i=a=o=n=r=null),"function"==typeof n&&(s=n,i=a=o=n=null),"function"==typeof o&&(s=o,i=a=o=null),"function"==typeof a&&(s=a,i=a=null),"function"==typeof i&&(s=i,i=null),"string"!=typeof t||"string"!=typeof e||r&&"string"!=typeof r||n&&"object"!=typeof n||o&&!F.isPriority(o)||a&&(!Array.isArray(a)||a.some(t=>"string"!=typeof t))||Array.isArray(n)||i&&"string"!=typeof i)A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),s);else{var c=c.getInstance(),u=A.apiHost+"/tickets/",l=P.postParam;if(l.channelName=t,l.channelType="SENDBIRD_JAVASCRIPT",r&&(l.groupKey=r),n){var f,d={};for(f in n)d[f]="string"==typeof n[f]?n[f]:JSON.stringify(n[f]);l.customFields=JSON.stringify(d)}o&&(l.priority=o),a&&(l.relatedChannelUrls=a.join(",")),i&&(l.botKey=i),l.info=JSON.stringify({ticket:{subject:t,requester:{name:e,email:c.getCurrentUserId()}}}),p.create({headers:P.header}).post(u,l).then(t=>{const r=new F(t.data);qo([r.channelUrl],(t,e)=>{t=A.getParamsFromCallback(t,e).result;0<t.length&&(r.channel=t[0]),j[r.channelUrl]=r,w.write("[REQ] ticket create:",r),A.callback(r,null,s)})}).catch(t=>A.callback(null,t,s))}else A.callback(null,k.create(k.Type.ERROR_SENDBIRD_SDK_MISSING),s)}static getOpenCount(e){var t=A.apiHost+"/tickets/count/?"+P.getParam;p.create({headers:P.header}).get(t).then(t=>A.callback(t.data,null,e)).catch(t=>A.callback(null,t,e))}static getByChannelUrl(n,t,e){let r=t,o=e;null==e&&(r=!1,o=t),j[n]&&r?A.callback(j[n],null,o):(e=`${A.apiHost}/tickets/?${P.getParam}&limit=10&channelUrl=`+n,p.create({headers:P.header}).get(e).then(t=>{let r=null;(r=t&&t.data&&0<t.data.results.length?new F(t.data.results[0]):r)?qo([n],(t,e)=>{t=A.getParamsFromCallback(t,e).result;0<t.length&&(r.channel=t[0]),j[n]=r,w.write(`[REQ] get ticket for channel ${n}:`,r),A.callback(r,null,o)}):A.callback(null,k.Type.ERROR_DATA_NOT_FOUND,o)}).catch(t=>A.callback(null,t,o)))}static getList(t,e){var{offset:t,customFieldFilter:r,group:n,status:o="all"}=t;Vo({offset:t,group:n,customFieldFilter:r,status:o},e)}static getOpenedList(t,e,r){"function"==typeof e&&(r=e,e=null),Vo({offset:t,customFieldFilter:e,status:this.Status.OPEN},r)}static getAllTickets(t,e,r){"function"==typeof e&&(r=e,e=null),Vo({offset:t,customFieldFilter:e,status:"all"},r)}static getClosedList(t,e,r){"function"==typeof e&&(r=e,e=null),Vo({offset:t,customFieldFilter:e,status:this.Status.CLOSED},r)}static getUrlPreview(t,e){var r=A.apiHost+"/tickets/url_preview/",n=P.postParam;n.url=t,p.create({headers:P.header}).post(r,n).then(t=>A.callback(t.data,null,e)).catch(t=>A.callback(null,t,e))}static confirmEndOfChat(n,o,a){"string"==typeof o&&-1<["yes","no"].indexOf(o)?F.getByChannelUrl(n.channelUrl,(t,e)=>{const r=A.getParamsFromCallback(t,e).result;t=`${A.apiHost}/tickets/${r.id}/edit_message/`,e=P.postParam;e.messageId=n.messageId,e.messageData=JSON.stringify({type:Ho.DataType.TICKET_INQUIRE_CLOSURE,body:{state:"yes"===o?Ho.ClosureState.CONFIRMED:Ho.ClosureState.DECLINED,ticketId:r.id}}),p.create({headers:P.header}).patch(t,e).then(t=>{w.write("[REQ] confirmed end of chat:",r),A.callback(t.data,null,a)}).catch(t=>A.callback(null,t,a))}):A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER))}static submitFeedback(n,o){let a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length?arguments[3]:void 0;n&&0<n.messageId&&n.channelUrl&&"number"==typeof o&&1<=o&&o<=5&&"string"==typeof a?F.getByChannelUrl(n.channelUrl,(t,e)=>{const r=A.getParamsFromCallback(t,e).result;t=`${A.apiHost}/tickets/${r.id}/edit_message/`,e=P.postParam;e.messageId=n.messageId,e.messageData=JSON.stringify({type:Ho.DataType.TICKET_FEEDBACK,body:{state:Ho.FeedbackState.CONFIRMED,customerSatisfactionScore:o,customerSatisfactionComment:a,ticketId:r.id}}),p.create({headers:P.header}).patch(t,e).then(t=>{w.write("[REQ] customer feedback:",r),A.callback(t.data,null,i)}).catch(t=>A.callback(null,t,i))}):A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER))}}let Wo=!1;return class{constructor(){}static get version(){return A.sdkVersion}static get Error(){return k}static get Agent(){return zo}static get Ticket(){return F}static get Message(){return Ho}static get RelatedChannel(){return $o}static get UrlRegExp(){return Ho.UrlRegExp}static init(t){try{t||(window&&window.SendBird&&(t=window.SendBird),global&&global.SendBird&&(t=global.SendBird)),t&&t.version?(A.sendBird=t,A.isSendBirdSdkCompatible(t.version)?Wo=!0:k.throw(k.Type.ERROR_SENDBIRD_SDK_VERSION_NOT_SUPPORTED)):k.throw(k.Type.ERROR_SENDBIRD_SDK_MISSING)}catch(t){k.throw(k.Type.ERROR_SENDBIRD_SDK_MISSING)}}static authenticate(t,e,r){Wo?P.connect(t,e,r):k.throw(k.Type.ERROR_SENDBIRD_DESK_INIT_MISSING)}static isDeskChannel(t){return F.isDeskCustomType(t.customType)}static setApiHost(t){A.apiHost=t}static setDebugMode(){A.setDebugMode()}static setCustomerCustomFields(t,o){if("object"!=typeof t||null===t||Array.isArray(t))A.callback(null,k.create(k.Type.ERROR_INVALID_PARAMETER),o);else{var e,r={};for(e in t)r[e]="string"==typeof t[e]?t[e]:JSON.stringify(t[e]);var n=A.apiHost+"/customers/custom_fields/",a=P.postParam;a.customFields=JSON.stringify(r),p.create({headers:P.header}).patch(n,a).then(t=>{var e,r={};for(e in t.data.customFields){var n=t.data.customFields[e];r[n.key]=n.value}A.callback(r,null,o)}).catch(t=>{A.callback(null,t,o)})}}}});